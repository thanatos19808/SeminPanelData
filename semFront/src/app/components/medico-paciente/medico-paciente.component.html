<app-nav-med></app-nav-med>
<div class="base" id="container" style="overflow: hidden;">
    <lib-ngx-notification></lib-ngx-notification> 
    <ngx-spinner></ngx-spinner>
    <div class="row"> 
        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
            <h4 style="color :#9AB638; padding-left: 15px;">Expedientes:</h4>   
        </div> 
        <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8" style="text-align: right">  
            <button *ngIf="pacienteCargado == 1" type="button" class="btn boton" (click)="purgarRegistro()" (click)="verModal(crearPacienteModal)">Nuevo Paciente</button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button *ngIf="pacienteCargado == 1" type="button" class="btn boton" (click)="consultarExpedientes()">Actualizar</button>
            <button *ngIf="pacienteCargado==0" type="button" class="btn boton" disabled>Actualizar</button>
        </div> 
        <br><br>  
    </div> 
    <br>
    <div *ngIf="pacienteCargado==0">
        <span><a id="logo"><img class="logo" src="../assets/img/logoBicolor.png"></a></span>
    </div>
    <div *ngIf="pacienteFlag==1"> 
        <div style="text-align: center; font-size: 1.2em;" class="alert-success" role="alert">Aún no tiene ningún expediente clínico asociado. Por favor solicite a un representante Semín o a su Paciente acceso a su expediente Clínico Virtual Semín. </div> 
    </div>
    <div class="invisible" [ngClass]="{'visible': pacienteCargado > 0}" id="paciente">
        <div *ngIf="tablaPermisos">
            <div *ngIf="tablaPermisos.count > 0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <table id="listaPacientes" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Exp.</th>
                        <th>Paciente</th>
                        <th>sexo</th>
                        <th>Nacimiento</th>
                        <th>Email</th>
                        <th>Celular</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let results of tablaPermisos.results; index as i" (click)="verModalPaciente(results, expedienteModal)"> 
                        <td *ngIf="!results.Paciente.numExpediente"><span >{{results.Paciente.numExpediente}}</span></td>
                        <td *ngIf="results.Paciente.numExpediente"><span ></span></td>
                        <td ><span >{{results.Paciente.nombre}} {{results.Paciente.apellido_paterno}} {{results.Paciente.apellido_materno}}</span></td>
                        <td *ngIf="results.Paciente.sexo"><span >{{results.Paciente.sexo}}</span></td>
                        <td *ngIf="!results.Paciente.sexo"><span ></span></td>
                        <td *ngIf="results.Paciente.fecha_nacimiento"><span >{{results.Paciente.fecha_nacimiento}}</span></td>
                        <td *ngIf="!results.Paciente.fecha_nacimiento"><span ></span></td>
                        <td *ngIf="results.Paciente.email"><span ></span>{{results.Paciente.email}}</td>
                        <td *ngIf="!results.Paciente.email"><span ></span></td>
                        <td *ngIf="results.Paciente.telefonoCelular"><span >{{results.Paciente.telefonoCelular}}</span></td>
                        <td *ngIf="!results.Paciente.telefonoCelular"><span ></span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div *ngIf="pacientes">
            <div *ngIf="pacientes.count > 0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <table id="listaPacientesSemin" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Expediente</th>
                        <th>Paciente</th>
                        <th>sexo</th>
                        <th>Fecha nacimiento</th>
                        <th>Email</th>
                        <th>Celular</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let results of pacientes.results; index as i" (click)="verModalPacienteSemin(results, expedienteModal)"> 
                        <td *ngIf="!results.numExpediente"><span >{{results.numExpediente}}</span></td>
                        <td *ngIf="results.numExpediente"><span ></span></td>
                        <td ><span >{{results.nombre}} {{results.apellido_paterno}} {{results.apellido_materno}}</span></td>
                        <td *ngIf="results.sexo"><span >{{results.sexo}}</span></td>
                        <td *ngIf="!results.sexo"><span ></span></td>
                        <td *ngIf="results.fecha_nacimiento"><span >{{results.fecha_nacimiento}}</span></td>
                        <td *ngIf="!results.fecha_nacimiento"><span ></span></td>
                        <td *ngIf="results.email"><span ></span>{{results.email}}</td>
                        <td *ngIf="!results.email"><span ></span></td>
                        <td *ngIf="results.telefonoCelular"><span >{{results.telefonoCelular}}</span></td>
                        <td *ngIf="!results.telefonoCelular"><span ></span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<ng-template #expedienteModal let-c="close" led-d="dismiss"> 
    <!-- Modal Header -->
    <div class="modal-header" style="color:white; background-color:#9AB638;">  
        <h4>Expediente clínico</h4>  
        <button type="button" class="close" style="color:white;"  (click)="c('')">x</button>
    </div> 
    <!-- Modal Body -->
    <div class="modal-body">
        <div class="row" >
            <div *ngIf="paciente.imagen">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3 col-xl-2" style="text-align: center;">
                    <img class="imagen" src="https://semindigital.com:8090{{paciente.imagen}}" /> 
                </div>
            </div>
            <div *ngIf="!paciente.imagen">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3 col-xl-2" style="text-align: center;">
                    <span><a id="imagen"><img class="imagen" src="../assets/img/user.png"></a></span>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-8" style="text-align: center;">
                <p style="font-size: 30px;">{{paciente.nombre}} {{paciente.apellido_paterno}} {{paciente.apellido_materno}}</p>
                <p *ngIf="edadMeses >= 11 && edad > 1" style="font-size: 27px;">{{paciente.fecha_nacimiento}} / {{edad}} Años</p>
                <p *ngIf="edadMeses >= 11 && edad == 1" style="font-size: 27px;">{{paciente.fecha_nacimiento}} / {{edad}} Año</p>
                <p *ngIf="edadMeses < 11" style="font-size: 27px;">{{paciente.fecha_nacimiento}} / {{edadMeses}} meses</p>  
            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-3 col-xl-2" style="text-align: center;">
                <button *ngIf="historiaCaducidad == 1 || historiaVacia == 1" type="button" class="btn boton" disabled>Nueva Consulta</button>
                <button *ngIf="historiaCaducidad == 0 && historiaVacia == 0" (click)="purgarNuevaNota()" (click)="verModalSmall(tipoConsultaModal)" type="button" class="btn boton" style="color: white;">Nueva Consulta</button> 
                <br><br>
                <p *ngIf="ultimaConsulta" style="font-size: 16px;"><strong>Última consulta: </strong><strong>Fecha: </strong>{{ultimaConsulta.split('T')[0]}} <strong>Hora: </strong>{{ultimaConsulta.substring(11,19)}}</p>
                <p *ngIf="!ultimaConsulta" style="font-size: 16px;"><strong>Última consulta: <br> Sin consultas</strong></p>
            </div>
        </div>
        <ul class="nav nav-tabs">
            <li><a class="active" data-toggle="tab" href="#t-exp-per"> Perfil</a></li>
            <li><a data-toggle="tab" href="#t-exp-hist"(click)="consultarHistoriasClinicasMedico()" >Historia Clínica</a></li>
            <li><a data-toggle="tab" href="#t-ext-not" (click)="consultarNotasMedico()">Consultas</a></li>
            <li><a data-toggle="tab" href="#t-ext-est" (click)="consultarResultados()">Estudios</a></li>
        </ul>
        <div class="tab-content">
            <div id="t-exp-per" class="tab-pane fade show active">   
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: end;">
                    <button  type="button" class="btn boton" style="margin-right: 15px;" (click)="verModalBuscador(pruebaModal)" >Agendar estudio</button>
                    <button *ngIf="descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" (click)="downloadPerfilPDF()" >Descargar página</button>
                    <button *ngIf="!descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" disabled >Generando...</button>
                    <button type="button" class="btn boton" (click)="rellenarPacienteCampos()" (click)="verModal(pacienteActualizarModal)">Actualizar</button>
                </div>
                <div class="row" id="perfilClinico">
                    <div style="margin-left: -5%;" class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-4" >
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <span><a id="logo"><img class="logo" src="../../../../assets/img/logoBicolor.png"></a></span>
                        </div>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"></div>
                    <br>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4" >
                        <strong class="titulo" >Datos personales:</strong>
                        <br>
                        <br>
                        <p *ngIf="paciente.fecha_nacimiento">Fecha de nacimiento: <strong>{{paciente.fecha_nacimiento}}</strong></p>
                        <p *ngIf="!paciente.fecha_nacimiento">Fecha de nacimiento: <strong>No definido</strong></p>
                        <p *ngIf="paciente.fecha_nacimiento && edadMeses >= 11">Edad: <strong>{{edad}}</strong></p> 
                        <p *ngIf="paciente.fecha_nacimiento && edadMeses < 11">Meses de edad: <strong>{{edadMeses}}</strong></p>
                        <p *ngIf="paciente.fecha_registro">Fecha de registro: <strong>{{paciente.fecha_registro}}</strong></p>
                        <p *ngIf="!paciente.fecha_registro">Fecha de registro: <strong>No definido</strong></p>
                        <p *ngIf="paciente.sexo == 'femenino'">"Sexo: <strong>Femenino</strong></p>
                        <p *ngIf="paciente.sexo == 'masculino'">"Sexo: <strong>Maculino</strong></p>
                        <p *ngIf="!paciente.sexo">Sexo: <strong>No definido</strong></p>
                        <p *ngIf="paciente.tipo_sangre">Tipo de sangre: <strong>{{paciente.tipo_sangre}}</strong></p>
                        <p *ngIf="!paciente.tipo_sangre">Tipo de sangre: <strong>No definido</strong></p>
                        <p *ngIf="paciente.curp">CURP: <strong>{{paciente.curp}}</strong></p>
                        <p *ngIf="!paciente.curp" >CURP: <strong>No definido</strong></p>
                        <br>   
                        <strong class="titulo" >Contacto:</strong>
                        <br>   
                        <br>  
                        <p *ngIf="paciente.telefonoCasa">Telefono casa: <strong>{{paciente.telefonoCasa}}</strong></p>
                        <p *ngIf="!paciente.telefonoCasa">Telefono casa: <strong>No definido</strong></p>
                        <p *ngIf="paciente.telefonoOficina">Telefono oficina: <strong>{{paciente.telefonoOficina}}</strong></p>
                        <p *ngIf="!paciente.telefonoOficina">Telefono oficina: <strong>No definido</strong></p>
                        <p *ngIf="paciente.telefonoCelular">Telefono celular: <strong>{{paciente.telefonoCelular}}</strong></p>
                        <p *ngIf="!paciente.telefonoCelular">Telefono celular: <strong>No definido</strong></p>
                        <p *ngIf="paciente.email">Correo: <strong>{{paciente.email}}</strong></p>
                        <p *ngIf="!paciente.email">Correo: <strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4" >
                        <br>
                        <br>
                        <p *ngIf="paciente.entidad_nacimiento">Entidad de nacimiento: <strong>{{paciente.entidad_nacimiento}}</strong></p>
                        <p *ngIf="!paciente.entidad_nacimiento">Entidad de nacimiento: <strong>No definido</strong></p>
                        <p *ngIf="paciente.entidad">Entidad de residencia: <strong>{{paciente.entidad}}</strong></p>
                        <p *ngIf="!paciente.entidad">Entidad de residencia: <strong>No definido</strong></p>
                        <p *ngIf="paciente.tipo_vivienda">Tipo de vivienda: <strong>{{paciente.tipo_vivienda}}</strong></p>
                        <p *ngIf="!paciente.tipo_vivienda">Tipo de vivienda: <strong>No definido</strong></p>
                        <p *ngIf="paciente.discapacidad">Discapacidad: <strong>{{paciente.discapacidad}}</strong></p>
                        <p *ngIf="!paciente.discapacidad">Discapacidad: <strong>No definido</strong></p>
                        <p *ngIf="paciente.grupoEtnico">Grupo étnico: <strong>{{paciente.grupoEtnico}}</strong></p>
                        <p *ngIf="!paciente.grupoEtnico">grupo étnico: <strong>No definido</strong></p>
                        <p *ngIf="paciente.religion">Religión: <strong>{{paciente.religion}}</strong></p>
                        <p *ngIf="!paciente.religion">Religión: <strong>No definido</strong></p>
                        <p *ngIf="paciente.ocupacion">Ocupación: <strong>{{paciente.ocupacion}}</strong></p>
                        <p *ngIf="!paciente.ocupacion">Ocupación: <strong>No definido</strong></p>
                        <p *ngIf="paciente.tipoDomicilio">Tipo domicilio: <strong>{{paciente.tipoDomicilio}}</strong></p>
                        <p *ngIf="!paciente.tipoDomicilio">Tipo domicilio: <strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4" >
                        <strong class="titulo" >Dirección:</strong>
                        <br>
                        <br>   
                        <p *ngIf="paciente.calle">Calle: <strong>{{paciente.calle}}</strong></p>
                        <p *ngIf="!paciente.calle">Calle: <strong>No definido</strong></p>
                        <p *ngIf="paciente.num_interior">Número interior: <strong>{{paciente.num_interior}}</strong></p>
                        <p *ngIf="!paciente.num_interior">Número interior: <strong>No definido</strong></p>
                        <p *ngIf="paciente.num_exterior">Número exterior <strong>{{paciente.num_exterior}}</strong></p>
                        <p *ngIf="!paciente.num_exterior">Número exterior: <strong>No definido</strong></p>
                        <p *ngIf="paciente.colonia">Colonia: <strong>{{paciente.colonia}}</strong></p>
                        <p *ngIf="!paciente.colonia" >Colonia: <strong>No definido</strong></p>
                        <p *ngIf="paciente.cp">CP: <strong>{{paciente.cp}}</strong></p>
                        <p *ngIf="!paciente.cp" >CP: <strong>No definido</strong></p>
                        <p *ngIf="paciente.estado">Estado: <strong>{{paciente.estado}}</strong></p>
                        <p *ngIf="!paciente.estado" >Estado: <strong>No definido</strong></p>
                        <p *ngIf="paciente.localidad">Localidad: <strong>{{paciente.localidad}}</strong></p>
                        <p *ngIf="!paciente.localidad" >Ciudad: <strong>No definido</strong></p>
                        <p *ngIf="paciente.municipio">Municipio: <strong>{{paciente.municipio}}</strong></p>
                        <p *ngIf="!paciente.municipio" >Municipio: <strong>No definido</strong></p>
                    </div>
                </div> 
            </div>
            <div id="t-exp-hist" class="tab-pane fade">
                <div *ngIf="historiaVacia == 1" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: end;">
                    <button *ngIf="(edadMeses > 11)" type="button" class="btn boton" (click)="verModal(imcModal)">Tabla I.M.C</button> 
                    <button *ngIf="(edadMeses <= 11)" type="button" class="btn boton" (click)="verModal(imcModalMenor)">Tablas Relacionadas</button> 
                    &nbsp;&nbsp;
                    <button type="button" class="btn boton" (click)="rellenarHistoriaCamposNueva()" (click)="verModal(actualizarHistoriaModal)">Nueva Historia Clínica</button> 
                    &nbsp;&nbsp;
                    <button type="button" class="btn boton" disabled>Ver historial</button>
                    <br><br>
                    <div class="alert alert-warning" role="alert" style="text-align: center;">Este paciente no cuenta con Historias Clínicas que mostrar.</div>
                </div>
                <div *ngIf="historiaClinica" class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <div *ngIf="historiaCaducidad == 1" class="alert alert-danger" role="alert" style="text-align: center;">Esta Historia Clínica fue hecha hace más de un año. Por favor actualice los datos del paciente en el botón de “Actualizar” de esta ventana para poder efectuar una consulta.</div>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: end;"> 
                        <button *ngIf="(edadMeses > 11)" type="button" class="btn boton" (click)="verModal(imcModal)">Tabla I.M.C</button> 
                        <button *ngIf="(edadMeses <= 11)" type="button" class="btn boton" (click)="verModal(imcModalMenor)">Tablas Relacionadas</button> 
                        &nbsp;&nbsp;
                        <button *ngIf="descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" (click)="downloadHistPDF()" >Descargar página</button>
                        <button *ngIf="!descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" disabled >Generando...</button>
                        <button type="button" class="btn boton" (click)="rellenarHistoriaCampos()" (click)="verModal(actualizarHistoriaModal)">Actualizar</button>
                        &nbsp;&nbsp;
                        <button type="button" class="btn boton"  (click)="reiniciarListaHistoria()" (click)="verModalSmall(historialModal)" >Ver Historial</button>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <div class="alert alert-success" role="alert" style="text-align: center;">Por medio del presente el que suscribe al calce, legalmente habilitado para la practica médica, hace constar que realizo valoración médica al arriba identificado.</div>
                    </div> 
                    <br><br><br><br>
                    <div id="historiaPrincipalPag1">
                        <div style="margin-left: -5%;" class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-4" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <span><a id="logo"><img class="logo" src="../../../../assets/img/logoBicolor.png"></a></span>
                                <br><br>
                            </div>
                        </div>
                        <div *ngIf="historiaClinica.creacion" style="padding-left:30px;" class="row">
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                                <p><strong>Historia clínica </strong></p> 
                                <p>{{paciente.nombre}} {{paciente.apellido_paterno}} {{paciente.apellido_materno}}</p> 
                                <p *ngIf="edadMeses >= 11 && edad > 1" >{{paciente.fecha_nacimiento}} / {{edad}} Años</p>
                                <p *ngIf="edadMeses >= 11 && edad == 1" >{{paciente.fecha_nacimiento}} / {{edad}} Año</p>
                                <p *ngIf="edadMeses < 11" >{{paciente.fecha_nacimiento}} / {{edadMeses}} meses</p>                         
                            </div> 
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                                <p><strong>Última actualización: </strong></p> 
                                <p><strong>Fecha: </strong>{{historiaClinica.creacion.split('T')[0]}} <strong>Hora: </strong>{{historiaClinica.creacion.substring(11,19)}}</p> 
                            </div>
                        </div> 
                        <div style="margin-left: 30px" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <br>
                            <p><strong>Datos generales: </strong></p> 
                        </div> 
                        <div class="row" style="margin-left: 30px">
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                                <p *ngIf="historiaClinica.tipoInterrogatorio">Tipo de interrogatorio: <strong>{{historiaClinica.tipoInterrogatorio}}</strong></p>
                                <p *ngIf="!historiaClinica.tipoInterrogatorio" >Tipo de interrogatorio: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.informador">Informador: <strong>{{historiaClinica.informador}}</strong></p>
                                <p *ngIf="!historiaClinica.informador" >Informador: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.estadoSalud">Estado de salud: <strong>{{historiaClinica.estadoSalud}}</strong></p>
                                <p *ngIf="!historiaClinica.estadoSalud" >Estado de salud: <strong>No definido</strong></p>
                                <br>
                                <p *ngIf="historiaClinica.telefonoCasa">Teléfono de casa: <strong>{{historiaClinica.telefonoCasa}}</strong></p>
                                <p *ngIf="!historiaClinica.telefonoCasa" >Teléfono de casa: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.telefonoOficina">Teléfono de oficina: <strong>{{historiaClinica.telefonoOficina}}</strong></p>
                                <p *ngIf="!historiaClinica.telefonoOficina" >Teléfono de oficina: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.telefonoCelular">Celular: <strong>{{historiaClinica.telefonoCelular}}</strong></p>
                                <p *ngIf="!historiaClinica.telefonoCelular" >Celular: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.email">Email: <strong>{{historiaClinica.email}}</strong></p>
                                <p *ngIf="!historiaClinica.email" >Email: <strong>No definido</strong></p>
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                                <p *ngIf="historiaClinica.religion">Religión: <strong>{{historiaClinica.religion}}</strong></p>
                                <p *ngIf="!historiaClinica.religion" >Religión: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.ocupacion">Ocupación: <strong>{{historiaClinica.ocupacion}}</strong></p>
                                <p *ngIf="!historiaClinica.ocupacion" >Ocupación: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.numHijos">Número de hijos: <strong>{{historiaClinica.numHijos}}</strong></p>
                                <p *ngIf="!historiaClinica.numHijos" >Número de hijos: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.estadoCivil">Estado civil: <strong>{{historiaClinica.estadoCivil}}</strong></p>
                                <p *ngIf="!historiaClinica.estadoCivil" >Estado civil: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.maxGradoEstudios">Máximo grado de estudios: <strong>{{historiaClinica.maxGradoEstudios}}</strong></p>
                                <p *ngIf="!historiaClinica.maxGradoEstudios" >Máximo grado de estudios: <strong>No definido</strong></p>
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                                <p *ngIf="historiaClinica.entidad_nacimiento">Entidad de nacimiento: <strong>{{historiaClinica.entidad_nacimiento}}</strong></p>
                                <p *ngIf="!historiaClinica.entidad_nacimiento" >Entidad de nacimiento: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.estado">Estado actual: <strong>{{historiaClinica.estado}}</strong></p>
                                <p *ngIf="!historiaClinica.estado" >Estado actual: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.municipio">Calle: <strong>{{historiaClinica.municipio}}</strong></p>
                                <p *ngIf="!historiaClinica.municipio" >Calle: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.colonia">Colonia: <strong>{{historiaClinica.colonia}}</strong></p>
                                <p *ngIf="!historiaClinica.colonia" >Colonia: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.num_interior">Num. interior: <strong>{{historiaClinica.num_interior}}</strong></p>
                                <p *ngIf="!historiaClinica.num_interior" >Num. interior: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.num_exterior">Num. exterior: <strong>{{historiaClinica.num_exterior}}</strong></p>
                                <p *ngIf="!historiaClinica.num_exterior" >Num. exterior: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.cp">Cp: <strong>{{historiaClinica.cp}}</strong></p>
                                <p *ngIf="!historiaClinica.cp" >Cp: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.municipio">Municipio: <strong>{{historiaClinica.municipio}}</strong></p>
                                <p *ngIf="!historiaClinica.municipio" >Municipio: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.localidad">Localidad: <strong>{{historiaClinica.localidad}}</strong></p>
                                <p *ngIf="!historiaClinica.localidad" >Localidad: <strong>No definido</strong></p>
                            </div>
                        </div>
                        <div style="margin-left: 30px" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <p><strong>Datos antopométricos: </strong></p> 
                        </div> 
                        <div class="row" style="margin-left: 30px">
                            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                                <p *ngIf="historiaClinica.sexo == 'femenino'">"Sexo: <strong>Femenino</strong></p>
                                <p *ngIf="historiaClinica.sexo == 'masculino'">"Sexo: <strong>Maculino</strong></p>
                                <p *ngIf="!historiaClinica.sexo" >Sexo: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.peso">Peso: <strong>{{historiaClinica.peso}} Kg.</strong></p>
                                <p *ngIf="!historiaClinica.peso" >Peso: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.talla">Talla: <strong>{{historiaClinica.talla}} cm.</strong></p>
                                <p *ngIf="!historiaClinica.talla" >Talla: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.temperatura">Temperatura: <strong>{{historiaClinica.temperatura}} °C.</strong></p>
                                <p *ngIf="!historiaClinica.temperatura" >Temperatura: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.indiceMasaCorporal">Índice de masa corporal: <strong>{{historiaClinica.indiceMasaCorporal}} Kg/m².</strong></p>
                            </div>
                            <div class="col-5 col-sm-5 col-md-5 col-lg-5 col-xl-5" >
                                <br>
                                <p *ngIf="historiaClinica.frecuenciaCardiaca">Frecuencia cardiaca: <strong>{{historiaClinica.frecuenciaCardiaca}} latidos Por minuto.</strong></p>
                                <p *ngIf="!historiaClinica.frecuenciaCardiaca" >Frecuencia cardiaca: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.frecuenciaRespiratoria">Frecuencia respiratoria: <strong>{{historiaClinica.frecuenciaRespiratoria}} respiraciónes por minuto.</strong></p>
                                <p *ngIf="!historiaClinica.frecuenciaRespiratoria" >Frecuencia respiratoria: <strong>No definido</strong></p>
                                <p *ngIf="historiaClinica.tensionArterialSistole && historiaClinica.tensionArterialDiastole">Sistólica y Diastólica: <strong>{{historiaClinica.tensionArterialSistole}} / {{historiaClinica.tensionArterialDiastole}} mm/Hg.</strong></p>
                                <p *ngIf="!historiaClinica.tensionArterialSistole || !historiaClinica.tensionArterialDiastole" >Sistólica y Diastólica: <strong>No definido</strong></p>
                            </div>
                        </div>
                    </div>
                    <div style="padding-left:30px; padding-right: 15px; text-align:justify"  class="row" id="historiaPrincipalPag2">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Antecedentes familiares: </strong></p> 
                            <p *ngIf="historiaClinica.antecedentesFamiliares">{{historiaClinica.antecedentesFamiliares}}</p>
                            <p *ngIf="!historiaClinica.antecedentesFamiliares" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Antecedentes personales no patológicos: </strong></p> 
                            <p *ngIf="historiaClinica.antecedentesPersonalesNoPatologicos">{{historiaClinica.antecedentesPersonalesNoPatologicos}}</p>
                            <p *ngIf="!historiaClinica.antecedentesPersonalesNoPatologicos" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Antecedentes personales patológicos: </strong></p> 
                            <p *ngIf="historiaClinica.antecedentesPersonalesPatologicos">{{historiaClinica.antecedentesPersonalesPatologicos}}</p>
                            <p *ngIf="!historiaClinica.antecedentesPersonalesPatologicos" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Procedimiento actual: </strong></p> 
                            <p *ngIf="historiaClinica.procedimientoActual">{{historiaClinica.procedimientoActual}}</p>
                            <p *ngIf="!historiaClinica.procedimientoActual" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                            <br>
                            <p><strong>Auxiliares diagnostico: </strong></p> 
                            <p *ngIf="historiaClinica.auxiliaresDiagnostico">{{historiaClinica.auxiliaresDiagnostico}}</p>
                            <p *ngIf="!historiaClinica.auxiliaresDiagnostico" ><strong>No definido</strong></p>
                        </div>
                    </div>
                    <div style="padding-left:30px; padding-right: 15px; text-align:justify" class="row" id="historiaPrincipalPag3">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema neurológico: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaNeurologico">{{historiaClinica.sistemaNeurologico}}</p>
                            <p *ngIf="!historiaClinica.sistemaNeurologico" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                            <br>
                            <p><strong>Sistema tegumentario: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaTegumentario">{{historiaClinica.sistemaTegumentario}}</p>
                            <p *ngIf="!historiaClinica.sistemaTegumentario" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema músculo esquelético: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaMusculoEsqueletico">{{historiaClinica.sistemaMusculoEsqueletico}}</p>
                            <p *ngIf="!historiaClinica.sistemaMusculoEsqueletico" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema respiratorio: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaRespiratorio">{{historiaClinica.sistemaRespiratorio}}</p>
                            <p *ngIf="!historiaClinica.sistemaRespiratorio" ><strong>No definido</strong></p>
                        </div>
                    </div>
                    <div style="padding-left:30px; padding-right: 15px; text-align:justify" class="row" id="historiaPrincipalPag4">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema digestivo: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaDigestivo">{{historiaClinica.sistemaDigestivo}}</p>
                            <p *ngIf="!historiaClinica.sistemaDigestivo" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema urinario: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaUrinario">{{historiaClinica.sistemaUrinario}}</p>
                            <p *ngIf="!historiaClinica.sistemaUrinario" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistema reproductor: </strong></p> 
                            <p *ngIf="historiaClinica.sistemaReproductor">{{historiaClinica.sistemaReproductor}}</p>
                            <p *ngIf="!historiaClinica.sistemaReproductor" ><strong>No definido</strong></p>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <p><strong>Sistemas sentidos: </strong></p> 
                            <p *ngIf="historiaClinica.sistemasSentidos">{{historiaClinica.sistemasSentidos}}</p>
                            <p *ngIf="!historiaClinica.sistemasSentidos" ><strong>No definido</strong></p>
                        </div>
                    </div>
                </div>
            </div> 
            <div id="t-ext-not" class="tab-pane fade">
                <div *ngIf="notas"> 
                    <div class="row">
                        <div *ngIf="historiaVacia == 0" class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-3" style="padding-bottom: 15px;">
                            <select  [(ngModel)]="categoriaSeleccionada" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off" (change)="consultarNotasMedico()">
                                <option [ngValue]="0"selected>Seleccionar Categoria...</option>
                                <option [ngValue]="1">Medicina General</option>
                                <option [ngValue]="2">Medicina Interna</option>
                                <option [ngValue]="3">Cirugía</option>
                                <option [ngValue]="4">Endocrinología</option>
                                <option [ngValue]="5">Ginecología</option>
                                <option [ngValue]="6">Nefrología</option> 
                                <option [ngValue]="7">Neurocirugía</option>
                                <option [ngValue]="8">Neurología</option>
                                <option [ngValue]="9">Pediatría</option> 
                                <option [ngValue]="10">Traumatología y Ortopedia</option>
                                <option [ngValue]="11">Urología</option>
                            </select> 
                        </div>
                        <div *ngIf="historiaVacia == 0" class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-2" style="padding-bottom: 15px;">
                            <select  [(ngModel)]="fechaSeleccionada" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off" (change)="consultarNotasMedico()">
                                <option [ngValue]="0" selected>Seleccionar Fecha...</option>
                                <option [ngValue]="1">Último Año</option>
                                <option [ngValue]="2">Último Mes</option>
                            </select> 
                        </div>
                        <div *ngIf="historiaVacia == 0" class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-3" style="padding-bottom: 15px;">
                            <select  [(ngModel)]="consultaSeleccionada" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off" (change)="consultarNotasMedico()">
                                <option [ngValue]="0" selected>Seleccionar Consulta..</option>
                                <option [ngValue]="1">Todas las Consultas</option>
                                <option [ngValue]="2">Solo mis Consultas</option>
                            </select> 
                        </div>
                        <div *ngIf="historiaVacia == 0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-4" style="text-align: right;">
                            <button *ngIf="(edadMeses > 11)" type="button" class="btn boton" (click)="verModal(imcModal)">Tabla I.M.C</button> 
                            <button *ngIf="(edadMeses <= 11)" type="button" class="btn boton" (click)="verModal(imcModalMenor)">Tablas Relacionadas</button> 
                            &nbsp;&nbsp;
                            <button *ngIf="historiaCaducidad == 0" (click)="purgarNuevaNota()" (click)="verModalSmall(tipoConsultaModal)" type="button" class="btn boton" style="color: white;">Nueva Consulta</button> 
                            <button *ngIf="historiaCaducidad == 1" type="button" class="btn boton" style="color: white;" disabled>Nueva Consulta</button> 
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button" class="btn boton" style="color: white;" (click)="consultarNotasMedico()">Actualizar</button> 
                        </div>
                        <div *ngIf="historiaVacia == 1" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: end;">
                            <button *ngIf="(edadMeses > 11)" type="button" class="btn boton" (click)="verModal(imcModal)">Tabla I.M.C</button>
                            <button *ngIf="(edadMeses <= 11)" type="button" class="btn boton" (click)="verModal(imcModalMenor)">Tablas Relacionadas</button>  
                            &nbsp;&nbsp;
                            <button type="button" class="btn boton" style="color: white;" disabled>Nueva Consulta</button> 
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <button *ngIf="categoriaSeleccionada == 0" type="button" class="btn boton" style="color: white;" disabled>Actualizar</button>
                        </div>
                        <div *ngIf="notaVacia == 1" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <div class="alert alert-warning" role="alert" style="text-align: center;">Este paciente no tiene consultas previas que mostrar.</div>
                        </div>
                        <div *ngIf="historiaCaducidad == 1" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div class="alert alert-danger" role="alert" style="text-align: center;">La Historia Clínica fue hecha hace más de un año. Por favor actualice los datos de la Historia Clínica del paciente para poder efectuar una consulta.</div>
                        </div>
                        <div *ngIf="historiaVacia == 1" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div class="alert alert-danger" role="alert" style="text-align: center;">Este paciente no cuenta con una Historia Clínica previa. Por favor cree una para poder efectuar una consulta.</div>
                        </div> 
                        <div *ngIf="notaVacia == 0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"> 
                            <div *ngIf="notas">
                                <br><br>
                                <table id="listaNotas" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>Fecha</th> 
                                            <th>Especialidad</th> 
                                            <th>Médico</th> 
                                        </tr>
                                        </thead>  
                                        <tbody>
                                        <tr *ngFor="let results of notas.results; index as i" (click)="verModalNotas(results, notasModal)"> 
                                            <td><span >{{results.creacion.split('T')[0]}} {{results.creacion.substring(11,19)}}</span></td>
                                            <td *ngIf="results.especialidad"><span >{{results.especialidad}}</span></td>
                                            <td *ngIf="!results.especialidad"><span >No Especificado</span></td>
                                            <td *ngIf="results.Medico"><span >{{results.Medico.nombre}} {{results.Medico.apellido_paterno}} {{results.Medico.apellido_materno}}</span></td>
                                            <td *ngIf="!results.Medico"><span >No Especificado</span></td>
                                        </tr>
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="t-ext-est" class="tab-pane fade"> 
                <div *ngIf="resultados">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: right;"> 
                        <button type="button" class="btn boton" style="color: white; margin-right: 15px;" (click)="consultarResultados()">Actualizar</button> 
                    </div>
                    <br>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <table id="listaEstudios" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                            <thead>
                            <tr>
                                <th>Nombre del estudio</th>
                                <th>Fecha de realización</th>
                            </tr> 
                            </thead>
                            <tbody> 
                            <tr *ngFor="let results of resultados.results; index as i" (click)="verModalEstudio(results, estudioModal)"> 
                                <td><span >{{results.tipoEstudio.substr(0,60)}}</span></td>
                                <td><span >{{results.fecha_realizacion}}</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <br>
                    <button type="button" class="btn boton" (click)="purgarEstudio()" (click)="verModal(subirEstudioModal)">Subir Estudio</button>
                </div>  
            </div>
        </div>
        <br>
        <button type="button" class="btn boton" (click)="c('')">Regresar</button>
    </div>
  </ng-template>

    <ng-template #pacienteActualizarModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4><strong>Paciente: {{pacienteActualizar.nombre}} {{pacienteActualizar.apellido_paterno}} {{pacienteActualizar.apellido_materno}}</strong></h4>
            <button type="button" style="color:white;" class="close" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <ul class="nav nav-tabs">
                <li><a class="active" data-toggle="tab" href="#t-pac-gral">General</a></li>
                <li><a data-toggle="tab" href="#t-pac-dir" >Dirección</a></li>
                <li><a data-toggle="tab" href="#t-pac-con" >Contacto</a></li>
                <li><a data-toggle="tab" href="#t-pac-otro" >Otros</a></li>
            </ul>
            <div class="tab-content" [formGroup]="pacienteForm">
                <div id="t-pac-gral" class="tab-pane fade  show active">
                    <label for="sexo" class="editar">Sexo</label>
                    <select class="form-control" id="sexo" formControlName="sexo" [(ngModel)]="pacienteActualizar.sexo">
                    <option>femenino</option>
                    <option>masculino</option>
                    </select>
                    <br>     
                    <label class="editar">Fecha de nacimiento</label>
                    <br>
                    <input class="form-control" id="date" type="date" formControlName="fecha_nacimiento" [(ngModel)]="pacienteActualizar.fecha_nacimiento">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['fecha_nacimiento'].errors?.minDate">Esta fecha se debe encontrar entre los últimos 120 años</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['fecha_nacimiento'].errors?.maxDate">Esta fecha no puede superar el dia de hoy</span>
                    <br>
                    <label for="sangrePaciente" class="editar">Tipo de Sangre</label>
                    <br>
                    <select class="form-control" id="sangrePaciente" formControlName="tipo_sangre" [(ngModel)]="pacienteActualizar.tipo_sangre">
                    <option>N/A</option>
                    <option>A+</option>
                    <option>A-</option>
                    <option>B+</option>
                    <option>B-</option>
                    <option>O+</option>
                    <option>O-</option>
                    <option>AB+</option>
                    <option>AB-</option>
                    </select>
                    <br>
                    <label class="editar">CURP</label>
                    <input class="form-control" type="text" placeholder="CURP" formControlName="curp" [(ngModel)]="pacienteActualizar.curp">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['curp'].errors?.minlength">CURP debe tener 18 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['curp'].errors?.maxlength">CURP debe tener 18 caracteres</span>
                    <br>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['curp'].errors?.pattern">No parece ser un CURP válido</span>
                </div>
                <div id="t-pac-dir" class="tab-pane fade">
                    <br>
                    <label>Calle</label>
                    <input class="form-control" type="text" placeholder="Calle" formControlName="calle" [(ngModel)]="pacienteActualizar.calle">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['calle'].errors?.minlength">Calle debe tener mas de 8 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['calle'].errors?.maxlength">Calle debe tener menos de 90 caracteres</span>
                    <br>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['calle'].errors?.pattern">No válido</span>
                    <label>Colonia</label>
                    <br>
                    <input class="form-control" type="text" placeholder="Colonia" formControlName="colonia" [(ngModel)]="pacienteActualizar.colonia">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['colonia'].errors?.minlength">Colonia debe tener mas de 5 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['colonia'].errors?.maxlength">Colonia debe tener menos de 45 caracteres</span>
                    <br>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['colonia'].errors?.pattern">No válido</span>		
                    <label>Numero interior</label>
                    <br>
                    <input class="form-control" type="text" placeholder="Num Interior" formControlName="num_interior" [(ngModel)]="pacienteActualizar.num_interior">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['num_interior'].errors?.maxlength">Número debe tener menos de 10 caracteres</span>
                    <br>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['num_interior'].errors?.pattern">No válido</span>
                    <br>
                    <label>Numero exterior</label>
                    <br>
                    <input class="form-control" type="text" placeholder="Num. Exterior" formControlName="num_exterior" [(ngModel)]="pacienteActualizar.num_exterior">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['num_exterior'].errors?.maxlength">Número debe tener menos de 10 caracteres</span>
                    <br>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['num_exterior'].errors?.pattern">No válido</span>
                    <label>Cp</label>
                    <input class="form-control" type="number" onkeydown="javascript: return event.keyCode == 69 ? false : true" placeholder="Cp" formControlName="cp" [(ngModel)]="pacienteActualizar.cp">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['cp'].errors?.min">Cp no válido</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['cp'].errors?.max">Cp no válido</span>
                    <br>
                    <label>Municipio</label>
                    <input class="form-control" type="text" placeholder="Municipio" formControlName="municipio" [(ngModel)]="pacienteActualizar.municipio">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['municipio'].errors?.minlength">Municipio debe tener mas de 2 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['municipio'].errors?.maxlength">municipio debe tener menos de 45 caracteres</span>
                    <br>
                    <label>Localidad</label>
                    <input class="form-control" type="text" placeholder="Localidad" formControlName="localidad" [(ngModel)]="pacienteActualizar.localidad">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['localidad'].errors?.minlength">Localidad debe tener mas de 2 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['localidad'].errors?.maxlength">Localidad debe tener menos de 200 caracteres</span>
                    <br>
                    <label>Estado</label>
                    <select class="form-control" formControlName="estado"  [(ngModel)]="pacienteActualizar.estado">
                        <option>Aguascalientes</option>
                        <option>Baja California</option>
                        <option>Baja California Sur</option>
                        <option>Campeche</option>
                        <option>CDMX</option>
                        <option>Chihuahua</option>
                        <option>Chiapas</option>
                        <option>Coahuila</option>
                        <option>Colima</option>
                        <option>Durango</option>
                        <option>Guanajuato</option>
                        <option>Guerrero</option>
                        <option>Hidalgo</option>
                        <option>Jalisco</option>
                        <option>México</option>
                        <option>Michoacán</option>
                        <option>Morelos</option>
                        <option>Nayarit</option>
                        <option>Nuevo León</option>
                        <option>Oaxaca</option>
                        <option>Puebla</option>
                        <option>Querétaro</option>
                        <option>Quintana Ro</option>
                        <option>San Luis Potosí</option>
                        <option>Sinaloa</option>
                        <option>Sonora</option>
                        <option>Tabasco</option>
                        <option>Tamaulipas</option>
                        <option>Tlaxcala</option>
                        <option>Veracruz</option>
                        <option>Yucatán</option>
                        <option>Zacatecas</option>
                    </select>
                    <br>
                </div>
                <div id="t-pac-con" class="tab-pane fade">
                    <br>
                    <label>Teléfono casa (Requerido)</label> 
                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoCasa" [(ngModel)]="pacienteActualizar.telefonoCasa">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoCasa'].errors?.min">Número no válido</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoCasa'].errors?.max">Número no válido</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoCasa'].touched && pacienteForm.controls['telefonoCasa'].errors?.required">Campo Requerido.</span>
                    <br>
                    <label>Teléfono Oficina</label>
                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoOficina" [(ngModel)]="pacienteActualizar.telefonoOficina">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoOficina'].errors?.min">Número no válido</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoOficina'].errors?.max">Número no válido</span>
                    <br>
                    <label>Teléfono Celular</label>
                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoCelular" [(ngModel)]="pacienteActualizar.telefonoCelular">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoCelular'].errors?.min">Número no válido</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['telefonoCelular'].errors?.max">Número no válido</span>
                    <br>
                </div>
                <div id="t-pac-otro" class="tab-pane fade">
                <br>
                    <label>Entidad de nacimiento</label>
                    <select class="form-control" formControlName="entidad_nacimiento"  [(ngModel)]="pacienteActualizar.entidad_nacimiento">
                        <option>Aguascalientes</option>
                        <option>Baja California</option>
                        <option>Baja California Sur</option>
                        <option>Campeche</option>
                        <option>CDMX</option>
                        <option>Chihuahua</option>
                        <option>Chiapas</option>
                        <option>Coahuila</option>
                        <option>Colima</option>
                        <option>Durango</option>
                        <option>Guanajuato</option>
                        <option>Guerrero</option>
                        <option>Hidalgo</option>
                        <option>Jalisco</option>
                        <option>México</option>
                        <option>Michoacán</option>
                        <option>Morelos</option>
                        <option>Nayarit</option>
                        <option>Nuevo León</option>
                        <option>Oaxaca</option>
                        <option>Puebla</option>
                        <option>Querétaro</option>
                        <option>Quintana Ro</option>
                        <option>San Luis Potosí</option>
                        <option>Sinaloa</option>
                        <option>Sonora</option>
                        <option>Tabasco</option>
                        <option>Tamaulipas</option>
                        <option>Tlaxcala</option>
                        <option>Veracruz</option>
                        <option>Yucatán</option>
                        <option>Zacatecas</option>
                    </select>
                    <br>
                    <label>Entidad de residencia</label>
                    <select class="form-control" formControlName="entidad"  [(ngModel)]="pacienteActualizar.entidad">
                        <option>Aguascalientes</option>
                        <option>Baja California</option>
                        <option>Baja California Sur</option>
                        <option>Campeche</option>
                        <option>CDMX</option>
                        <option>Chihuahua</option>
                        <option>Chiapas</option>
                        <option>Coahuila</option>
                        <option>Colima</option>
                        <option>Durango</option>
                        <option>Guanajuato</option>
                        <option>Guerrero</option>
                        <option>Hidalgo</option>
                        <option>Jalisco</option>
                        <option>México</option>
                        <option>Michoacán</option>
                        <option>Morelos</option>
                        <option>Nayarit</option>
                        <option>Nuevo León</option>
                        <option>Oaxaca</option>
                        <option>Puebla</option>
                        <option>Querétaro</option>
                        <option>Quintana Ro</option>
                        <option>San Luis Potosí</option>
                        <option>Sinaloa</option>
                        <option>Sonora</option>
                        <option>Tabasco</option>
                        <option>Tamaulipas</option>
                        <option>Tlaxcala</option>
                        <option>Veracruz</option>
                        <option>Yucatán</option>
                        <option>Zacatecas</option>
                    </select>
                    <br> 
                    <label>Nivel socioecónomico</label>
                    <input class="form-control" type="text" placeholder="Nivel Socioecónomico" formControlName="nivel_socioeconomico" [(ngModel)]="pacienteActualizar.nivel_socioeconomico">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['nivel_socioeconomico'].errors?.minlength">Nivel Socioecónomico debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['nivel_socioeconomico'].errors?.maxlength">Nivel Socioecónomico debe tener menos de 90 caracteres</span>
                    <br>
                    <label>Tipo de vivienda</label>
                    <input class="form-control" type="text" placeholder="Tipo de Vivienda" formControlName="tipo_vivienda" [(ngModel)]="pacienteActualizar.tipo_vivienda">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['tipo_vivienda'].errors?.minlength">Tipo de Vivienda debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['tipo_vivienda'].errors?.maxlength">Tipo de Vivienda debe tener menos de 90 caracteres</span>
                    <br>
                    <label>Discapacidad</label>
                    <input class="form-control" type="text" placeholder="Discapacidad" formControlName="discapacidad" [(ngModel)]="pacienteActualizar.discapacidad">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['discapacidad'].errors?.minlength">Discapacidad debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['discapacidad'].errors?.maxlength">Discapacidad debe tener menos de 90 caracteres</span>
                    <br>
                    <label>Grupo étnico</label>
                    <input class="form-control" type="text" placeholder="Grupo Étnico" formControlName="grupoEtnico" [(ngModel)]="pacienteActualizar.grupoEtnico">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['grupoEtnico'].errors?.minlength">Grupo Étnico debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['grupoEtnico'].errors?.maxlength">Grupo Étnico debe tener menos de 90 caracteres</span>
                    <br>
                    <label>Religión</label>
                    <input class="form-control" type="text" placeholder="Religión" formControlName="religion" [(ngModel)]="pacienteActualizar.religion">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['religion'].errors?.minlength">Religión debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['religion'].errors?.maxlength">Religión debe tener menos de 45 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['religion'].errors?.pattern">No válido.</span>
                    <br>
                    <label>Ocupación</label>
                    <input class="form-control" type="text" placeholder="Ocupación" formControlName="ocupacion" [(ngModel)]="pacienteActualizar.ocupacion">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['ocupacion'].errors?.minlength">Ocupación debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['ocupacion'].errors?.maxlength">Ocupación debe tener menos de 90 caracteres</span>
                    <br>
                    <label>Tipo de domicilio</label>
                    <input class="form-control" type="text" placeholder="Tipo de Domicilio" formControlName="tipoDomicilio" [(ngModel)]="pacienteActualizar.tipoDomicilio">
                    <span style="color:Red;" *ngIf="pacienteForm.controls['tipoDomicilio'].errors?.minlength">Tipo de Domicilio debe tener mas de 3 caracteres</span>
                    <span style="color:Red;" *ngIf="pacienteForm.controls['tipoDomicilio'].errors?.maxlength">Tipo de Domicilio debe tener menos de 90 caracteres</span>
                    <br>
                </div>
                <button type="button" class="btnboton" [disabled]="pacienteForm.invalid" (click)="actualizarPaciente()" (click)="c('')">Actualizar</button>
            </div>
        </div>
    </ng-template>


    <ng-template #subirEstudioModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Subir estudio</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <form [formGroup]="estudioSubirForm"> 
                <label>Nombre del estudio (Requerido)</label>
                <input class="form-control" type="text" placeholder="Nombre del estudio" formControlName="tipoEstudio"  [(ngModel)]="resultadoTmp.tipoEstudio">
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['tipoEstudio'].errors?.minlength">Debe ser de mas de 5 caracteres</span>
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['tipoEstudio'].errors?.maxlength">No debe ser de mas de 90 caracteres</span>
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['tipoEstudio'].touched && estudioSubirForm.controls['tipoEstudio'].errors?.required">Campo Requerido.</span>
                <br *ngIf="estudioSubirForm.controls['tipoEstudio'].errors?.pattern">
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['tipoEstudio'].errors?.pattern">No válido</span>
                <br>
                <label>Fecha de realización (Requerido)</label>
                <input class="form-control" id="date" type="date" formControlName="fecha_realizacion" [(ngModel)]="resultadoTmp.fecha_realizacion" >
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['fecha_realizacion'].touched && estudioSubirForm.controls['fecha_realizacion'].errors?.required">Campo Requerido.</span>
                <br>
                <label>Notas</label>
                <input class="form-control" type="text" placeholder="Notas" formControlName="notasEstudio"  [(ngModel)]="resultadoTmp.notasEstudio">
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['notasEstudio'].errors?.minlength">Debe ser de mas de 5 caracteres</span>
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['notasEstudio'].errors?.maxlength">No debe ser de mas de 500 caracteres</span>
                <br *ngIf="estudioSubirForm.controls['notasEstudio'].errors?.pattern">
                <span style="color:Red;" *ngIf="estudioSubirForm.controls['notasEstudio'].errors?.pattern">No válido</span>
                <br>
                <label>Selecciona el archivo (Requerido)</label>
                <br>
                <input type="file"(change)="onFileSelect($event)" />
                <br><br>
                <label>Selecciona el archivo DICOM</label>
                <br>
                <input type="file" (change)="onFileSelectDicom($event)" />
                <br>
                <br>
                <div *ngIf="estudioEstatus==1" class="alert alert-primary" role="alert">Espere...</div>
                <div *ngIf="estudioEstatus==2" class="alert alert-success" role="alert">Estudio Guardado Exitosamente</div>
                <div  *ngIf="estudioEstatus==3" class="alert alert-danger" role="alert">Error: {{msgError}}</div>
            </form>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button *ngIf="estudioEstatus==0" style="font-size: 20px;" type="button"  (click)="crearResultadoOp()" [disabled]="estudioSubirForm.invalid" class="btn boton">Subir</button>
           <!-- <button *ngIf="!estudioEstatus==0"  style="font-size: 20px;" type="button" class="btn boton" disabled>Subir</button>  -->
        </div>
        </ng-template>
    

    <ng-template #estudioModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Estudio</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row">
                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <p style="color:#9AB638; font-size: 20px;"><strong>Descripción: </strong></p>
                    <p><strong>Nombre del estudio: </strong>{{resultado.tipoEstudio}}</p>
                    <br>
                </div>
                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <br>
                    <br>
                    <p><strong>Fecha de realización: </strong>{{resultado.fecha_realizacion}}</p>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <br>
                    <div >
                        <button *ngIf="!resultado.file" style="background-color: #394793;" type="button" class="btn boton" disabled>Descargar</button>
                        <button *ngIf="resultado.file" style="background-color: #394793;" type="button" class="btn boton" (click)="download()">Descargar</button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button *ngIf="resultado.fileDicom" style="background-color: #394793;" type="button" class="btn boton" (click)="downloadDicom()">Descargar DICOM</button>
                    </div>
                    <hr>
                </div>
            </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
        </div>
    </ng-template>


    <ng-template #crearPacienteModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Nuevo paciente</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <div class="card-body" [formGroup]="usuarioForm">
                        <label for="tipoInterrogatorio">Correo (Requerido)</label>
                        <input type="text" class="form-control" placeholder="correo (Requerido)" formControlName="email" [(ngModel)]="userCrear.email" (change)="consultarDisponibilidadEmail()">
                        <div *ngIf="(pacienteExisteFlag==1 || medicoExisteFlag==1)" style="text-align: center;" class="alert alert-danger" role="alert">Este correo ya se encuentra registrado. </div> 
                        <p style="color:Red;" *ngIf="usuarioForm.controls['email'].touched && usuarioForm.controls['email'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['email'].errors?.minlength">Debe tener mínimo 5 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['email'].errors?.maxlength">No puede superar los 90 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['email'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Contraseña (Requerido)</label> 
                        <input type="password" class="form-control" placeholder="Contraseña (Requerido)" formControlName="password" [(ngModel)]="userCrear.password">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password'].touched && usuarioForm.controls['password'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password'].errors?.minlength">Debe tener mínimo 8 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password'].errors?.maxlength">No puede superar los 30 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Repetir contraseña (Requerido)</label> 
                        <input type="password" class="form-control" placeholder="Repetir Contraseña (Requerido)" formControlName="password2" [(ngModel)]="userCrear.password2">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password2'].touched && usuarioForm.controls['password2'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password2'].errors?.minlength">Debe tener mínimo 8 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password2'].errors?.maxlength">No puede superar los 30 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['password2'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Nombre (Requerido)</label> 
                        <input type="text" class="form-control" placeholder="Nombre (Requerido)" formControlName="nombre" [(ngModel)]="userCrear.first_name">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['nombre'].touched && usuarioForm.controls['nombre'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['nombre'].errors?.minlength">Debe tener mínimo 3 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['nombre'].errors?.maxlength">No puede superar los 90 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['nombre'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Primer apellido (Requerido)</label> 
                        <input type="text" class="form-control" placeholder="Primer Apellido (Requerido)" formControlName="primer_apellido" [(ngModel)]="userCrear.first_last_name">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['primer_apellido'].touched && usuarioForm.controls['primer_apellido'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['primer_apellido'].errors?.minlength">Debe tener mínimo 3 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['primer_apellido'].errors?.maxlength">No puede superar los 45 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['primer_apellido'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Segundo apellido (Requerido)</label> 
                        <input type="text" class="form-control" placeholder="Segundo Apellido" formControlName="segundo_apellido" [(ngModel)]="userCrear.second_last_name">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['segundo_apellido'].errors?.minlength">Debe tener mínimo 3 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['segundo_apellido'].errors?.maxlength">No puede superar los 45 caracteres. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['segundo_apellido'].errors?.pattern">No válido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Fecha nacimeinto (Requerido)</label> 
                        <input class="form-control" id="date" type="date" formControlName="fecha_nacimiento" [(ngModel)]="userCrear.fecha_nacimiento" >
                        <p style="color:Red;" *ngIf="usuarioForm.controls['fecha_nacimiento'].errors?.minDate">No válido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['fecha_nacimiento'].errors?.maxDate">No válido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['fecha_nacimiento'].touched && usuarioForm.controls['fecha_nacimiento'].errors?.required">Requerido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Sexo (Requerido)</label> 
                        <select class="form-control" id="sexo" formControlName="sexo" [(ngModel)]="userCrear.sexo"> 
                            <option>femenino</option>
                            <option>masculino</option>
                        </select>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['sexo'].touched && usuarioForm.controls['sexo'].errors?.required">Requerido. </p>
                        <br>
                        <label for="tipoInterrogatorio">Teléfono (Requerido)</label> 
                        <input name="telefono" class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="Número Telefónico (Requerido)" formControlName="telefono" [(ngModel)]="userCrear.telefono">
                        <p style="color:Red;" *ngIf="usuarioForm.controls['telefono'].touched && usuarioForm.controls['telefono'].errors?.required">Requerido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['telefono'].errors?.min">Número no válido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['telefono'].errors?.max">Número no válido. </p>
                        <p style="color:Red;" *ngIf="usuarioForm.controls['telefono'].errors?.pattern">No válido. </p>
                        <div class="form-group">
                            <div *ngIf="exito" class="alert alert-success" style="text-align: center; font-size: 20px;" role="alert">El usuario ha sido activado.</div>
                            <div *ngIf="err" class="alert alert-danger" style="text-align: center; font-size: 20px;" role="alert">Ha ocurrido un error: <br>{{msgError}}</div>
                        </div> 
                    </div>
                </div>
            </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button> 
            &nbsp;&nbsp;&nbsp;&nbsp;
            <input *ngIf="(pacienteExisteFlag==0 && medicoExisteFlag==0 && procesando==false)" type="submit" value="Registrar" [disabled]="usuarioForm.invalid" (click)="registerUser()" class="btn boton">
            <input *ngIf="procesando==true" type="submit" value="Espera..." class="btn boton" disabled>
            <input *ngIf="(pacienteExisteFlag==1 || medicoExisteFlag==1) " type="submit" value="Registra" class="btn boton" disabled>
        </div>
    </ng-template>


    <ng-template #historialModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Historial</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row">
                <div *ngIf="historiasClinica">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <table id="listaHistorias" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                            <thead>
                            <tr>
                                <th>Fecha</th> 
                                <th>Estado de Salud</th> 
                            </tr>
                            </thead>  
                            <tbody>
                            <tr *ngFor="let results of historiasClinica.results; index as i" (click)="verModalHistorial(results, historiaHistorialModal)"> 
                                <td><span >{{results.creacion.split('T')[0]}} {{results.creacion.substring(11,19)}}</span></td>
                                <td *ngIf="results.estadoSalud"><span >{{results.estadoSalud.substring(0,60)}}</span></td>
                                <td *ngIf="!results.estadoSalud"><span >No Especificado</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
        </div>
    </ng-template>

    <ng-template #historiaHistorialModal  let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header"  style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Historial</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row" >
                <div id="historiaTmpPag1">
                    <div style="margin-left: -5%;" class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-4" >
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <span><a id="logo"><img class="logo" src="../../../../assets/img/logoBicolor.png"></a></span>
                            <br><br>
                        </div>
                    </div>
                    <div *ngIf="historiaClinicaTmp.creacion" style="padding-left:30px;" class="row">
                        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                            <p><strong>Historia clínica </strong></p> 
                            <p>{{paciente.nombre}} {{paciente.apellido_paterno}} {{paciente.apellido_materno}}</p> 
                            <p *ngIf="edadMeses >= 11 && edad > 1" >{{paciente.fecha_nacimiento}} / {{edad}} Años</p>
                            <p *ngIf="edadMeses >= 11 && edad == 1" >{{paciente.fecha_nacimiento}} / {{edad}} Año</p>
                            <p *ngIf="edadMeses < 11" >{{paciente.fecha_nacimiento}} / {{edadMeses}} meses</p>                         
                        </div> 
                        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                            <p><strong>Última actualización: </strong></p> 
                            <p><strong>Fecha: </strong>{{historiaClinicaTmp.creacion.split('T')[0]}} <strong>Hora: </strong>{{historiaClinicaTmp.creacion.substring(11,19)}}</p> 
                        </div>
                    </div> 
                    <div style="margin-left: 30px" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <br>
                        <p><strong>Datos generales: </strong></p> 
                    </div> 
                    <div class="row" style="margin-left: 30px">
                        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                            <p *ngIf="historiaClinicaTmp.tipoInterrogatorio">Tipo de interrogatorio: <strong>{{historiaClinicaTmp.tipoInterrogatorio}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.tipoInterrogatorio" >Tipo de interrogatorio: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.informador">Informador: <strong>{{historiaClinicaTmp.informador}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.informador" >Informador: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.estadoSalud">Estado de salud: <strong>{{historiaClinicaTmp.estadoSalud}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.estadoSalud" >Estado de salud: <strong>No definido</strong></p>
                            <br>
                            <p *ngIf="historiaClinicaTmp.telefonoCasa">Teléfono de casa: <strong>{{historiaClinicaTmp.telefonoCasa}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.telefonoCasa" >Teléfono de casa: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.telefonoOficina">Teléfono de oficina: <strong>{{historiaClinicaTmp.telefonoOficina}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.telefonoOficina" >Teléfono de oficina: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.telefonoCelular">Celular: <strong>{{historiaClinicaTmp.telefonoCelular}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.telefonoCelular" >Celular: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.email">Email: <strong>{{historiaClinicaTmp.email}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.email" >Email: <strong>No definido</strong></p>
                        </div>
                        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                            <p *ngIf="historiaClinicaTmp.religion">Religión: <strong>{{historiaClinicaTmp.religion}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.religion" >Religión: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.ocupacion">Ocupación: <strong>{{historiaClinicaTmp.ocupacion}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.ocupacion" >Ocupación: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.numHijos">Número de hijos: <strong>{{historiaClinicaTmp.numHijos}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.numHijos" >Número de hijos: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.estadoCivil">Estado civil: <strong>{{historiaClinicaTmp.estadoCivil}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.estadoCivil" >Estado civil: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.maxGradoEstudios">Máximo grado de estudios: <strong>{{historiaClinicaTmp.maxGradoEstudios}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.maxGradoEstudios" >Máximo grado de estudios: <strong>No definido</strong></p>
                        </div>
                        <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4" >
                            <p *ngIf="historiaClinicaTmp.entidad_nacimiento">Entidad de nacimiento: <strong>{{historiaClinicaTmp.entidad_nacimiento}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.entidad_nacimiento" >Entidad de nacimiento: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.estado">Estado actual: <strong>{{historiaClinicaTmp.estado}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.estado" >Estado actual: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.municipio">Calle: <strong>{{historiaClinicaTmp.municipio}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.municipio" >Calle: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.colonia">Colonia: <strong>{{historiaClinicaTmp.colonia}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.colonia" >Colonia: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.num_interior">Num. interior: <strong>{{historiaClinicaTmp.num_interior}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.num_interior" >Num. interior: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.num_exterior">Num. exterior: <strong>{{historiaClinicaTmp.num_exterior}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.num_exterior" >Num. exterior: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.cp">Cp: <strong>{{historiaClinicaTmp.cp}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.cp" >Cp: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.municipio">Municipio: <strong>{{historiaClinicaTmp.municipio}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.municipio" >Municipio: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.localidad">Localidad: <strong>{{historiaClinicaTmp.localidad}}</strong></p>
                            <p *ngIf="!historiaClinicaTmp.localidad" >Localidad: <strong>No definido</strong></p>
                        </div>
                    </div>
                    <div style="margin-left: 30px" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <p><strong>Datos antopométricos: </strong></p> 
                    </div> 
                    <div class="row" style="margin-left: 30px">
                        <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                            <p *ngIf="historiaClinicaTmp.sexo == 'femenino'">"Sexo: <strong>Femenino</strong></p>
                            <p *ngIf="historiaClinicaTmp.sexo == 'masculino'">"Sexo: <strong>Maculino</strong></p>
                            <p *ngIf="!historiaClinicaTmp.sexo" >Sexo: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.peso">Peso: <strong>{{historiaClinicaTmp.peso}} Kg.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.peso" >Peso: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.talla">Talla: <strong>{{historiaClinicaTmp.talla}} cm.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.talla" >Talla: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.temperatura">Temperatura: <strong>{{historiaClinicaTmp.temperatura}} °C.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.temperatura" >Temperatura: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.indiceMasaCorporal">Índice de masa corporal: <strong>{{historiaClinicaTmp.indiceMasaCorporal}} Kg/m².</strong></p>
                        </div>
                        <div class="col-5 col-sm-5 col-md-5 col-lg-5 col-xl-5" >
                            <br>
                            <p *ngIf="historiaClinicaTmp.frecuenciaCardiaca">Frecuencia cardiaca: <strong>{{historiaClinicaTmp.frecuenciaCardiaca}} latidos Por minuto.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.frecuenciaCardiaca" >Frecuencia cardiaca: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.frecuenciaRespiratoria">Frecuencia respiratoria: <strong>{{historiaClinicaTmp.frecuenciaRespiratoria}} respiraciónes por minuto.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.frecuenciaRespiratoria" >Frecuencia respiratoria: <strong>No definido</strong></p>
                            <p *ngIf="historiaClinicaTmp.tensionArterialSistole && historiaClinicaTmp.tensionArterialDiastole">Sistólica y Diastólica: <strong>{{historiaClinicaTmp.tensionArterialSistole}} / {{historiaClinicaTmp.tensionArterialDiastole}} mm/Hg.</strong></p>
                            <p *ngIf="!historiaClinicaTmp.tensionArterialSistole || !historiaClinicaTmp.tensionArterialDiastole" >Sistólica y Diastólica: <strong>No definido</strong></p>
                        </div>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify"  class="row" id="historiaTmpPag2">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Antecedentes familiares: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.antecedentesFamiliares">{{historiaClinicaTmp.antecedentesFamiliares}}</p>
                        <p *ngIf="!historiaClinicaTmp.antecedentesFamiliares" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Antecedentes personales no patológicos: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.antecedentesPersonalesNoPatologicos">{{historiaClinicaTmp.antecedentesPersonalesNoPatologicos}}</p>
                        <p *ngIf="!historiaClinicaTmp.antecedentesPersonalesNoPatologicos" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Antecedentes personales patológicos: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.antecedentesPersonalesPatologicos">{{historiaClinicaTmp.antecedentesPersonalesPatologicos}}</p>
                        <p *ngIf="!historiaClinicaTmp.antecedentesPersonalesPatologicos" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Procedimiento actual: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.procedimientoActual">{{historiaClinicaTmp.procedimientoActual}}</p>
                        <p *ngIf="!historiaClinicaTmp.procedimientoActual" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                        <br>
                        <p><strong>Auxiliares diagnostico: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.auxiliaresDiagnostico">{{historiaClinicaTmp.auxiliaresDiagnostico}}</p>
                        <p *ngIf="!historiaClinicaTmp.auxiliaresDiagnostico" ><strong>No definido</strong></p>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify" class="row" id="historiaTmpPag3">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema neurológico: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaNeurologico">{{historiaClinicaTmp.sistemaNeurologico}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaNeurologico" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                        <br>
                        <p><strong>Sistema tegumentario: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaTegumentario">{{historiaClinicaTmp.sistemaTegumentario}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaTegumentario" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema músculo esquelético: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaMusculoEsqueletico">{{historiaClinicaTmp.sistemaMusculoEsqueletico}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaMusculoEsqueletico" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema respiratorio: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaRespiratorio">{{historiaClinicaTmp.sistemaRespiratorio}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaRespiratorio" ><strong>No definido</strong></p>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify" class="row" id="historiaTmpPag4">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema digestivo: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaDigestivo">{{historiaClinicaTmp.sistemaDigestivo}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaDigestivo" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema urinario: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaUrinario">{{historiaClinicaTmp.sistemaUrinario}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaUrinario" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistema reproductor: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemaReproductor">{{historiaClinicaTmp.sistemaReproductor}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemaReproductor" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Sistemas sentidos: </strong></p> 
                        <p *ngIf="historiaClinicaTmp.sistemasSentidos">{{historiaClinicaTmp.sistemasSentidos}}</p>
                        <p *ngIf="!historiaClinicaTmp.sistemasSentidos" ><strong>No definido</strong></p>
                    </div>
                </div>
                <br>                
            </div> 
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
            &nbsp;&nbsp;&nbsp;&nbsp; 
            <button *ngIf="descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" (click)="downloadHistTmpPDF()" >Descargar página</button>
            <button *ngIf="!descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" disabled >Generando...</button>
        </div>
    </ng-template>

    <ng-template #actualizarHistoriaModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Actualizar historia clínica</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <ul class="nav nav-tabs">
                <li><a class="active" data-toggle="tab" href="#t-hist-gral">General</a></li>
                <li><a data-toggle="tab" href="#t-hist-ant">Antecedentes</a></li>
                <li><a data-toggle="tab" href="#t-hist-dir" >Dirección</a></li>
                <li><a data-toggle="tab" href="#t-hist-ext">Extras</a></li>
                <li><a data-toggle="tab" href="#t-hist-sist">Sistemas</a></li>
            </ul>
            <div class="tab-content" [formGroup]="historiaCrearForm">
                <div id="t-hist-gral" class="tab-pane fade show active">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label for="tipoInterrogatorio">Tipo de Interrogatorio (Requerido)</label>
                            <select class="form-control" id="tipoInterrogatorio" formControlName="tipoInterrogatorio" (change)="validarTipoInterrogatorio()" [(ngModel)]="historiaClinicaTmp.tipoInterrogatorio">
                                <option>DIRECTO</option>
                                <option>INDIRECTO</option>
                                <option>MIXTO</option>
                            </select>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['tipoInterrogatorio'].touched && historiaCrearForm.controls['tipoInterrogatorio'].errors?.required">Requerido.</span>
                            <br> 
                            <label>Informador (Requerido)</label>
                            <input *ngIf="!interrogatorioFlag" class="form-control" type="text" placeholder="Informador" formControlName="informador" [(ngModel)]="historiaClinicaTmp.informador">
                            <input *ngIf="interrogatorioFlag" class="form-control" type="text" placeholder="Informador" formControlName="informador" [(ngModel)]="historiaClinicaTmp.informador" disabled>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['informador'].errors?.minlength">Debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['informador'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['informador'].errors?.maxlength">Debe tener menos de 200 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['informador'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['informador'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['informador'].errors?.pattern">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['informador'].touched && historiaCrearForm.controls['informador'].errors?.required">Requerido.</span>
                            <br *ngIf="historiaCrearForm.controls['informador'].touched && historiaCrearForm.controls['informador'].errors?.required">
                            <br>
                            <label>Estado de nacimeinto (Requerido)</label>
                            <select class="form-control" formControlName="entidad_nacimiento"  [(ngModel)]="historiaClinicaTmp.entidad_nacimiento">
                                <option>Aguascalientes</option>
                                <option>Baja California</option>
                                <option>Baja California Sur</option>
                                <option>Campeche</option>
                                <option>CDMX</option>
                                <option>Chihuahua</option>
                                <option>Chiapas</option>
                                <option>Coahuila</option>
                                <option>Colima</option>
                                <option>Durango</option>
                                <option>Guanajuato</option>
                                <option>Guerrero</option>
                                <option>Hidalgo</option>
                                <option>Jalisco</option>
                                <option>México</option>
                                <option>Michoacán</option>
                                <option>Morelos</option>
                                <option>Nayarit</option>
                                <option>Nuevo León</option>
                                <option>Oaxaca</option>
                                <option>Puebla</option>
                                <option>Querétaro</option>
                                <option>Quintana Ro</option>
                                <option>San Luis Potosí</option>
                                <option>Sinaloa</option>
                                <option>Sonora</option>
                                <option>Tabasco</option>
                                <option>Tamaulipas</option>
                                <option>Tlaxcala</option>
                                <option>Veracruz</option>
                                <option>Yucatán</option>
                                <option>Zacatecas</option>
                            </select>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['entidad_nacimiento'].touched && historiaCrearForm.controls['entidad_nacimiento'].errors?.required">Requerido.</span>
                            <br *ngIf="historiaCrearForm.controls['entidad_nacimiento'].touched && historiaCrearForm.controls['entidad_nacimiento'].errors?.required">
                            <br>                        
                            <label>Estado de salud (Requerido)</label>
                            <input class="form-control" type="text" placeholder="" formControlName="estadoSalud" [(ngModel)]="historiaClinicaTmp.estadoSalud">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.minlength">Debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.maxlength">Debe tener menos de 200 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['estadoSalud'].errors?.pattern">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['estadoSalud'].touched && historiaCrearForm.controls['estadoSalud'].errors?.required">Requerido.</span>
                            <br *ngIf="historiaCrearForm.controls['estadoSalud'].touched && historiaCrearForm.controls['estadoSalud'].errors?.required">
                            <br>
                            <label>Teléfono de casa (Requerido)</label>
                            <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoCasa" [(ngModel)]="historiaClinicaTmp.telefonoCasa">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoCasa'].errors?.min">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoCasa'].errors?.min">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoCasa'].errors?.max">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoCasa'].errors?.max">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoCasa'].touched && historiaCrearForm.controls['telefonoCasa'].errors?.required">Requerido.</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoCasa'].touched && historiaCrearForm.controls['telefonoCasa'].errors?.required">     
                            <br>  
                            <label>Teléfono de oficina (Opcional)</label>
                            <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoOficina" [(ngModel)]="historiaClinicaTmp.telefonoOficina">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoOficina'].errors?.min">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoOficina'].errors?.min">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoOficina'].errors?.max">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoOficina'].errors?.max">
                            <br>  
                            <label>Teléfono celular (Opcional)</label>
                            <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="telefonoCelular" [(ngModel)]="historiaClinicaTmp.telefonoCelular">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoCelular'].errors?.min">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoCelular'].errors?.min">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['telefonoCelular'].errors?.max">Número no válido</span>
                            <br *ngIf="historiaCrearForm.controls['telefonoCelular'].errors?.max">
                            <br>
                            <label for="sexo">Sexo (Requerido)</label>
                            <select class="form-control" id="sexo" formControlName="sexo" [(ngModel)]="historiaClinicaTmp.sexo">
                                <option>masculino</option>
                                <option>femenino</option>
                            </select>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sexo'].touched && historiaCrearForm.controls['sexo'].errors?.required">Requerido.</span>
                            <br>
                            <hr>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Peso (Requerido)</label> 
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="peso" [(ngModel)]="historiaClinicaTmp.peso" (change)="calcularIMC()">
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Kg.</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['peso'].errors?.min">Número no válido</span>
                                    <br *ngIf="historiaCrearForm.controls['peso'].errors?.min">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['peso'].errors?.max">Número no válido</span>
                                    <br *ngIf="historiaCrearForm.controls['peso'].errors?.max">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['peso'].touched && historiaCrearForm.controls['peso'].errors?.required">Requerido.</span>
                                    <br *ngIf="historiaCrearForm.controls['peso'].touched && historiaCrearForm.controls['peso'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Talla (Requerido)</label>
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="talla" [(ngModel)]="historiaClinicaTmp.talla" (change)="calcularIMC()">
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">cm.</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['talla'].errors?.min">Número no válido</span>
                                    <br *ngIf="historiaCrearForm.controls['talla'].errors?.min">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['talla'].errors?.max">Número no válido</span>
                                    <br *ngIf="historiaCrearForm.controls['talla'].errors?.max">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['talla'].touched && historiaCrearForm.controls['talla'].errors?.required">Requerido.</span>
                                    <br *ngIf="historiaCrearForm.controls['talla'].touched && historiaCrearForm.controls['talla'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Índice de masa corporal</label>
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" type="number" placeholder="" formControlName="indiceMasaCorporal" [(ngModel)]="historiaClinicaTmp.indiceMasaCorporal" disabled>
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Kg/m²</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['indiceMasaCorporal'].errors?.min">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['indiceMasaCorporal'].errors?.min">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['indiceMasaCorporal'].errors?.max">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['indiceMasaCorporal'].errors?.max">
                                    <span *ngIf="edad < 11" >No aplica.</span>
                                    <br *ngIf="edad < 11">
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Frecuencia cardiaca (Requerido)</label>
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="frecuenciaCardiaca" [(ngModel)]="historiaClinicaTmp.frecuenciaCardiaca">
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">latidos por minuto</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].errors?.min">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].errors?.min">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].errors?.max">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].errors?.max">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].touched && historiaCrearForm.controls['frecuenciaCardiaca'].errors?.required">Requerido.</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaCardiaca'].touched && historiaCrearForm.controls['frecuenciaCardiaca'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Frecuencia respiratoria (Requerido)</label>
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="frecuenciaRespiratoria" [(ngModel)]="historiaClinicaTmp.frecuenciaRespiratoria">
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Respiraciones por minuto</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.min">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.min">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.max">No válido</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.max">
                                    <span style="color:Red;" *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].touched && historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.required">Requerido.</span>
                                    <br *ngIf="historiaCrearForm.controls['frecuenciaRespiratoria'].touched && historiaCrearForm.controls['frecuenciaRespiratoria'].errors?.required">    
                                    <br>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="padding-left: 30px" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Temperatura (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="temperatura" [(ngModel)]="historiaClinicaTmp.temperatura">
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                <label style="padding-top: 10px;">°C</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['temperatura'].errors?.min">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['temperatura'].errors?.min">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['temperatura'].errors?.max">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['temperatura'].errors?.max">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['temperatura'].touched && historiaCrearForm.controls['temperatura'].errors?.required">Requerido.</span>
                                <br *ngIf="historiaCrearForm.controls['temperatura'].touched && historiaCrearForm.controls['temperatura'].errors?.required">    
                                <br>
                            </div>
                        </div>
                        <div class="row" style="padding-left: 30px" > 
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: center;">
                                <label>Presión arterial (Requerido)</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Sístole (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="tensionArterialSistole" [(ngModel)]="historiaClinicaTmp.tensionArterialSistole">
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialSistole'].errors?.min">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialSistole'].errors?.min">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialSistole'].errors?.max">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialSistole'].errors?.max">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialSistole'].touched && historiaCrearForm.controls['tensionArterialSistole'].errors?.required">Requerido.</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialSistole'].touched && historiaCrearForm.controls['tensionArterialSistole'].errors?.required">     
                                <br>
                            </div>
                        </div>
                        <div class="row" style="padding-left: 30px" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Diástole (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="tensionArterialDiastole" [(ngModel)]="historiaClinicaTmp.tensionArterialDiastole">
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                <label style="padding-top: 10px;">MM/Hg</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].errors?.min">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].errors?.min">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].errors?.max">No válido</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].errors?.max">
                                <span style="color:Red;" *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].touched && historiaCrearForm.controls['tensionArterialDiastole'].errors?.required">Requerido.</span>
                                <br *ngIf="historiaCrearForm.controls['tensionArterialDiastole'].touched && historiaCrearForm.controls['tensionArterialDiastole'].errors?.required">     
                                <br>
                            </div>
                        </div>
                    </div>     
                </div>
                <div id="t-hist-ant" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Antecedentes familiares (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Antecedentes familiares" formControlName="antecedentesFamiliares"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.antecedentesFamiliares" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.antecedentesFamiliares">Caracteres Restantes: {{2000-historiaClinicaTmp.antecedentesFamiliares.length}}</span>
                            <br *ngIf="historiaClinicaTmp.antecedentesFamiliares">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesFamiliares'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesFamiliares'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesFamiliares'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <br>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Antecedentes personales no patológicos (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Antecedentes personales no patológicos" formControlName="antecedentesPersonalesNoPatologicos"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.antecedentesPersonalesNoPatologicos" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.antecedentesPersonalesNoPatologicos">Caracteres Restantes: {{2000-historiaClinicaTmp.antecedentesPersonalesNoPatologicos.length}}</span>
                            <br *ngIf="historiaClinicaTmp.antecedentesPersonalesNoPatologicos">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesNoPatologicos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesNoPatologicos'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesNoPatologicos'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <br>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Antecedentes personales patológicos (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Antecedentes personales patológicos" formControlName="antecedentesPersonalesPatologicos"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.antecedentesPersonalesPatologicos" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.antecedentesPersonalesPatologicos">Caracteres Restantes: {{2000-historiaClinicaTmp.antecedentesPersonalesPatologicos.length}}</span>
                            <br *ngIf="historiaClinicaTmp.antecedentesPersonalesPatologicos">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesPatologicos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesPatologicos'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['antecedentesPersonalesPatologicos'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <br>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Procedimiento actual (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Procedimiento actual" formControlName="procedimientoActual"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.procedimientoActual" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.procedimientoActual">Caracteres Restantes: {{2000-historiaClinicaTmp.procedimientoActual.length}}</span>
                            <br *ngIf="historiaClinicaTmp.procedimientoActual">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['procedimientoActual'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['procedimientoActual'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['procedimientoActual'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <br>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Auxiliares diagnostico (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Auxiliares diagnostico " formControlName="auxiliaresDiagnostico"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.auxiliaresDiagnostico" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.auxiliaresDiagnostico">Caracteres Restantes: {{2000-historiaClinicaTmp.auxiliaresDiagnostico.length}}</span>
                            <br *ngIf="historiaClinicaTmp.auxiliaresDiagnostico">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['auxiliaresDiagnostico'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['auxiliaresDiagnostico'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['auxiliaresDiagnostico'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                    </div>
                </div>      
                <div id="t-hist-dir" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Calle (Opcional)</label>
                            <input class="form-control" type="text" placeholder="Calle" formControlName="calle" [(ngModel)]="historiaClinicaTmp.calle">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['calle'].errors?.minlength">Calle debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['calle'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['calle'].errors?.maxlength">Calle debe tener menos de 90 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['calle'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['calle'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['calle'].errors?.pattern">
                            <br>
                            <label>Colonia (Opcional)</label>
                            <br>
                            <input class="form-control" type="text" placeholder="Colonia" formControlName="colonia" [(ngModel)]="historiaClinicaTmp.colonia">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['colonia'].errors?.minlength">Colonia debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['colonia'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['colonia'].errors?.maxlength">Colonia debe tener menos de 45 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['colonia'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['colonia'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['colonia'].errors?.pattern">
                            <br>
                            <label>Número interior (Opcional)</label>
                            <br>
                            <input class="form-control" type="text" placeholder="Num Interior" formControlName="num_interior" [(ngModel)]="historiaClinicaTmp.num_interior">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['num_interior'].errors?.maxlength">Número debe tener menos de 10 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['num_interior'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['num_interior'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['num_interior'].errors?.pattern">
                            <br>
                            <label>Número exterior (Opcional)</label>
                            <br>
                            <input class="form-control" type="text" placeholder="Num. Exterior" formControlName="num_exterior" [(ngModel)]="historiaClinicaTmp.num_exterior">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['num_exterior'].errors?.maxlength">Número debe tener menos de 10 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['num_exterior'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['num_exterior'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['num_exterior'].errors?.pattern">
                            <br>
                            <label>Cp (Opcional)</label>
                            <input class="form-control" type="number" onkeydown="javascript: return event.keyCode == 69 ? false : true" placeholder="Cp" formControlName="cp" [(ngModel)]="historiaClinicaTmp.cp">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['cp'].errors?.min">Cp no válido</span>
                            <br *ngIf="historiaCrearForm.controls['cp'].errors?.min">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['cp'].errors?.max">Cp no válido</span>
                            <br *ngIf="historiaCrearForm.controls['cp'].errors?.max">
                            <br>
                            <label>Municipio (Opcional)</label>
                            <input class="form-control" type="text" placeholder="Municipio" formControlName="municipio" [(ngModel)]="historiaClinicaTmp.municipio">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['municipio'].errors?.minlength">Municipio debe tener mas de 2 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['municipio'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['municipio'].errors?.maxlength">municipio debe tener menos de 45 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['municipio'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['municipio'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['municipio'].errors?.pattern">
                            <br>
                            <label>Localidad (Opcional)</label>
                            <input class="form-control" type="text" placeholder="Localidad" formControlName="localidad" [(ngModel)]="historiaClinicaTmp.localidad">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['localidad'].errors?.minlength">Localidad debe tener mas de 2 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['localidad'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['localidad'].errors?.maxlength">Localidad debe tener menos de 200 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['localidad'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['localidad'].errors?.pattern">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['localidad'].errors?.pattern">
                            <br>
                            <label>Estado (Opcional)</label>
                            <select class="form-control" formControlName="estado"  [(ngModel)]="historiaClinicaTmp.estado">
                                <option>Aguascalientes</option>
                                <option>Baja California</option>
                                <option>Baja California Sur</option>
                                <option>Campeche</option>
                                <option>CDMX</option>
                                <option>Chihuahua</option>
                                <option>Chiapas</option>
                                <option>Coahuila</option>
                                <option>Colima</option>
                                <option>Durango</option>
                                <option>Guanajuato</option>
                                <option>Guerrero</option>
                                <option>Hidalgo</option>
                                <option>Jalisco</option>
                                <option>México</option>
                                <option>Michoacán</option>
                                <option>Morelos</option>
                                <option>Nayarit</option>
                                <option>Nuevo León</option>
                                <option>Oaxaca</option>
                                <option>Puebla</option>
                                <option>Querétaro</option>
                                <option>Quintana Ro</option>
                                <option>San Luis Potosí</option>
                                <option>Sinaloa</option>
                                <option>Sonora</option>
                                <option>Tabasco</option>
                                <option>Tamaulipas</option>
                                <option>Tlaxcala</option>
                                <option>Veracruz</option>
                                <option>Yucatán</option>
                                <option>Zacatecas</option>
                            </select>
                            <br>                        
                        </div>
                    </div>
                </div>
                <div id="t-hist-ext" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <label>Estado civil (Opcional)</label>
                            <select class="form-control" formControlName="estadoCivil"  [(ngModel)]="historiaClinicaTmp.estadoCivil">
                                <option>Soltero</option>
                                <option>Casado</option>
                                <option>Concubinato</option>
                                <option>Viudo</option>
                                <option>Divorciado</option>
                                <option>Separado</option>
                            </select>
                            <br>                        
                            <label>Número de hijos (Opcional)</label> 
                            <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="numHijos" [(ngModel)]="historiaClinicaTmp.numHijos" (change)="asignarMooleanNumHijos()">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['numHijos'].errors?.min">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['numHijos'].errors?.min">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['numHijos'].errors?.max">No válido</span>
                            <br *ngIf="historiaCrearForm.controls['numHijos'].errors?.max">
                            <br>
                            <label>Máximo grado de estudios (Opcional)</label>
                            <input class="form-control" type="text" placeholder="maxGradoEstudios" formControlName="maxGradoEstudios" [(ngModel)]="historiaClinicaTmp.maxGradoEstudios">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.minlength">Debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.maxlength">Debe tener menos de 50 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.pattern">No válido.</span>
                            <br *ngIf="historiaCrearForm.controls['maxGradoEstudios'].errors?.pattern">
                            <br>
                            <label>Ocupación (Opcional)</label>
                            <input class="form-control" type="text" placeholder="ocupacion" formControlName="ocupacion" [(ngModel)]="historiaClinicaTmp.ocupacion">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['ocupacion'].errors?.minlength">Debe tener mas de 5 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['ocupacion'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['ocupacion'].errors?.maxlength">Debe tener menos de 90 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['ocupacion'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['ocupacion'].errors?.pattern">No válido.</span>
                            <br *ngIf="historiaCrearForm.controls['ocupacion'].errors?.pattern">
                            <br>
                            <label>Religión (Opcional)</label>
                            <input class="form-control" type="text" placeholder="religion" formControlName="religion" [(ngModel)]="historiaClinicaTmp.religion">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['religion'].errors?.minlength">Debe tener mas de 3 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['religion'].errors?.minlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['religion'].errors?.maxlength">Debe tener menos de 45 caracteres</span>
                            <br *ngIf="historiaCrearForm.controls['religion'].errors?.maxlength">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['religion'].errors?.pattern">No válido.</span>
                            <br *ngIf="historiaCrearForm.controls['religion'].errors?.pattern">
                            <br>
                        </div>
                    </div>
                </div>          
                <div id="t-hist-sist" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema digestivo (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Digestivo" formControlName="sistemaDigestivo"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaDigestivo" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaDigestivo">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaDigestivo.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaDigestivo">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaDigestivo'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaDigestivo'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaDigestivo'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema músculo esquelético (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Musculo Esquelético" formControlName="sistemaMusculoEsqueletico"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaMusculoEsqueletico" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaMusculoEsqueletico">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaMusculoEsqueletico.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaMusculoEsqueletico">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaMusculoEsqueletico'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaMusculoEsqueletico'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaMusculoEsqueletico'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema neurológico (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Neurológico" formControlName="sistemaNeurologico"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaNeurologico" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaNeurologico">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaNeurologico.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaNeurologico">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaNeurologico'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaNeurologico'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaNeurologico'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema reproductor (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Reproductor" formControlName="sistemaReproductor"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaReproductor" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaReproductor">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaReproductor.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaReproductor">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaReproductor'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaReproductor'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaReproductor'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema respiratorio (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Respiratorio" formControlName="sistemaRespiratorio"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaRespiratorio" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaRespiratorio">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaRespiratorio.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaRespiratorio">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaRespiratorio'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaRespiratorio'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaRespiratorio'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema sentidos (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Sentidos" formControlName="sistemasSentidos"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemasSentidos" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemasSentidos">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemasSentidos.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemasSentidos">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemasSentidos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemasSentidos'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemasSentidos'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema tegumentario (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Tegumentario" formControlName="sistemaTegumentario"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaTegumentario" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaTegumentario">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaTegumentario.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaTegumentario">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaTegumentario'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaTegumentario'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaTegumentario'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Sistema urinario (Opcional)</label>
                            <textarea class="form-control" type="text" placeholder="Sistema Urinario" formControlName="sistemaUrinario"  maxlength="2000" [(ngModel)]="historiaClinicaTmp.sistemaUrinario" rows="5"></textarea>
                            <span *ngIf="historiaClinicaTmp.sistemaUrinario">Caracteres Restantes: {{2000-historiaClinicaTmp.sistemaUrinario.length}}</span>
                            <br *ngIf="historiaClinicaTmp.sistemaUrinario">
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaUrinario'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaUrinario'].errors?.maxlength">Debe tener menos de 1000 caracteres.</span>
                            <span style="color:Red;" *ngIf="historiaCrearForm.controls['sistemaUrinario'].errors?.pattern"> No válido.</span>
                            <br>
                        </div>
                    </div>        
                </div>
            </div> 
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button type="button" class="btn boton" [disabled]="historiaCrearForm.invalid" (click)="crearHistoria()" (click)="c('')">Actualizar</button>
        </div>
    </ng-template>

    <ng-template #notasModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Historial</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button> 
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div *ngIf="nota" class="row">
                <div id="consultaTmpPag1">
                    <div style="margin-left: -5%;" class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-4" >
                        <span><a id="logo"><img class="logo" src="../../../../assets/img/logoBicolor.png"></a></span>
                        <br><br>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="padding-left:15px;" class="row">
                        <div *ngIf="nota.creacion" class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                            <p><strong>Consulta </strong></p> 
                            <p>{{paciente.nombre}} {{paciente.apellido_paterno}} {{paciente.apellido_materno}}</p> 
                            <p *ngIf="edadMeses >= 11 && edad > 1" >{{paciente.fecha_nacimiento}} / {{edad}} Años</p>
                            <p *ngIf="edadMeses >= 11 && edad == 1" >{{paciente.fecha_nacimiento}} / {{edad}} Año</p>
                            <p *ngIf="edadMeses < 11" >{{paciente.fecha_nacimiento}} / {{edadMeses}} meses</p>                         
                        </div> 
                        <div *ngIf="nota.creacion" class="col-5 col-sm-5 col-md-5 col-lg-5 col-xl-5">
                            <p><strong>Creación: </strong></p> 
                            <p><strong>Fecha: </strong>{{nota.creacion.split('T')[0]}} <strong>Hora: </strong>{{nota.creacion.substring(11,19)}}</p> 
                            <p><strong>Especialidad: </strong>{{nota.especialidad}}</p> 
                        </div> 
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <hr>
                        <p><strong>Nota evolución: </strong></p> 
                        <p *ngIf="nota.notaEvolucion">{{nota.notaEvolucion}}</p>
                        <p *ngIf="!nota.notaEvolucion" ><strong>No definido</strong></p>
                    </div>
                    <div  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <hr>
                        <p><strong>Datos antopométricos: </strong></p> 
                    </div> 
                    <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                        <p *ngIf="nota.sexo == 'femenino'">"Sexo: <strong>Femenino</strong></p>
                        <p *ngIf="nota.sexo == 'masculino'">"Sexo: <strong>Maculino</strong></p>
                        <p *ngIf="!nota.sexo" >Sexo: <strong>No definido</strong></p>
                        <p *ngIf="nota.peso">Peso: <strong>{{nota.peso}} Kg.</strong></p>
                        <p *ngIf="!nota.peso" >Peso: <strong>No definido</strong></p>
                        <p *ngIf="nota.talla">Talla: <strong>{{nota.talla}} cm.</strong></p>
                        <p *ngIf="!nota.talla" >Talla: <strong>No definido</strong></p>
                        <p *ngIf="nota.temperatura">Temperatura: <strong>{{nota.temperatura}} °C.</strong></p>
                        <p *ngIf="!nota.temperatura" >Temperatura: <strong>No definido</strong></p>
                        <p *ngIf="nota.indiceMasaCorporal">Índice de masa corporal: <strong>{{nota.indiceMasaCorporal}} Kg/m².</strong></p>
                    </div>
                    <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                        <p *ngIf="nota.frecuenciaCardiaca">Frecuencia cardiaca: <strong>{{nota.frecuenciaCardiaca}} latidos por minuto.</strong></p>
                        <p *ngIf="!nota.frecuenciaCardiaca" >Frecuencia cardiaca: <strong>No definido</strong></p>
                        <p *ngIf="nota.frecuenciaRespiratoria">Frecuencia respiratoria: <strong>{{nota.frecuenciaRespiratoria}} respiraciónes por minuto.</strong></p>
                        <p *ngIf="!nota.frecuenciaRespiratoria" >Frecuencia respiratoria: <strong>No definido</strong></p> 
                        <p *ngIf="nota.tensionArterialSistole && nota.tensionArterialDiastole">Sistólica y Diastólica: <strong>{{nota.tensionArterialSistole}} / {{nota.tensionArterialDiastole}} mm/Hg.</strong></p>
                        <p *ngIf="!nota.tensionArterialSistole || !nota.tensionArterialDiastole" >Sistólica y Diastólica: <strong>No definido</strong></p>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" id="consultaTmpPag2">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <hr>
                        <p><strong>Clínicos: </strong></p> 
                        <p *ngIf="nota.clinicos">{{nota.clinicos}}</p>
                        <p *ngIf="!nota.clinicos" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                        <br>
                        <p><strong>Impresión diagnostica: </strong></p> 
                        <p *ngIf="nota.impresionDiagnostica">{{nota.impresionDiagnostica}}</p>
                        <p *ngIf="!nota.impresionDiagnostica" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Manejo recomendaciónes: </strong></p> 
                        <p *ngIf="nota.manejoRecomendaciones">{{nota.manejoRecomendaciones}}</p>
                        <p *ngIf="!nota.manejoRecomendaciones" ><strong>No definido</strong></p>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" id="consultaTmpPag3">
                    <div  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <hr>
                        <p><strong>SOAP: </strong></p> 
                    </div> 
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <p><strong>Subjetivo: </strong></p> 
                        <p *ngIf="nota.subjetivo">{{nota.subjetivo}}</p>
                        <p *ngIf="!nota.subjetivo" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Objetivo: </strong></p> 
                        <p *ngIf="nota.objetivo">{{nota.objetivo}}</p>
                        <p *ngIf="!nota.objetivo" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Análisis: </strong></p> 
                        <p *ngIf="nota.analisis">{{nota.analisis}}</p>
                        <p *ngIf="!nota.analisis" ><strong>No definido</strong></p>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <br>
                        <p><strong>Plan: </strong></p> 
                        <p *ngIf="nota.plan">{{nota.plan}}</p>
                        <p *ngIf="!nota.plan" ><strong>No definido</strong></p>
                        <hr>
                    </div>
                </div>
                <div style="padding-left:30px; padding-right: 15px; text-align:justify"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" id="consultaTmpPag4">
                    <div *ngIf="nota.tituloUno && nota.notaUno" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <p><strong>{{nota.tituloUno}}: </strong></p> 
                        <p *ngIf="nota.notaUno">{{nota.notaUno}}</p>
                        <hr>
                    </div>
                    <div *ngIf="nota.tituloDos && nota.notaDos" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <p><strong>{{nota.tituloDos}}: </strong></p> 
                        <p *ngIf="nota.notaDos">{{nota.notaDos}}</p>
                        <hr>
                    </div>
                    <div *ngIf="nota.tituloTres && nota.notaTres" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <p><strong>{{nota.tituloTres}}: </strong></p> 
                        <p *ngIf="nota.notaTres">{{nota.notaTres}}</p>
                        <hr>
                    </div>
                    <div *ngIf="nota.tituloCuatro && nota.notaCuatro" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                        <p><strong>{{nota.tituloCuatro}}: </strong></p> 
                        <p *ngIf="nota.notaCuatro">{{nota.notaCuatro}}</p>
                        <hr>
                    </div>
                </div>
            </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button *ngIf="descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" (click)="downloadConsPDF()" >Descargar página</button>
            <button *ngIf="!descargarPDF" type="button" class="btn boton" style="margin-right: 15px;" disabled >Generando...</button>
        </div>
    </ng-template>

    <ng-template #tipoConsultaModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Seleccionar especialidad</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body --> 
        <div class="modal-body"> 
            <h4 style="text-align: center;">Por favor Seleccione la especialidad de su consulta.</h4>  
            <br> 
            <select  [(ngModel)]="categoriaMedicoSeleccionada" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off" (change)="consultarPreviasNotasMedico()">
                <option [ngValue]="0"selected>Seleccionar Especialidad...</option> 
                <option *ngIf="medico.especialidad=='Medicina General'" [ngValue]="1">Medicina General</option>
                <option *ngIf="medico.especialidad=='Medicina Interna'" [ngValue]="2">Medicina Interna</option>
                <option *ngIf="medico.especialidad=='Cirugia'" [ngValue]="3">Cirugía</option>
                <option *ngIf="medico.especialidad=='Endocrinologia'" [ngValue]="4">Endocrinología</option>
                <option *ngIf="medico.especialidad=='Ginecologia'" [ngValue]="5">Ginecología</option>
                <option *ngIf="medico.especialidad=='Nefrologia'" [ngValue]="6">Nefrología</option> 
                <option *ngIf="medico.especialidad=='Neurocirugia'" [ngValue]="7">Neurocirugía</option>
                <option *ngIf="medico.especialidad=='Neurologia'" [ngValue]="8">Neurología</option>
                <option *ngIf="medico.especialidad=='Pediatria'" [ngValue]="9">Pediatría</option> 
                <option *ngIf="medico.especialidad=='Traumatologia y Ortopedia'" [ngValue]="10">Traumatología y Ortopedia</option>
                <option *ngIf="medico.especialidad=='Urologia'" [ngValue]="11">Urología</option>
            </select> 
            <br><br>
            <div *ngIf="flagPrevias==1" class="alert alert-success" role="alert" style="text-align: center;">Primera Consulta.</div>
            <div *ngIf="flagPrevias==2" class="alert alert-success" role="alert" style="text-align: center;">Consulta Subsecuente.</div>
            <div *ngIf="flagPrevias==2" style="text-align: center;"> 
                <p *ngIf="ultimaConsultaPrev" style="font-size: 16px;"><strong>Consulta Previa: <br></strong><strong>Fecha: </strong>{{ultimaConsultaPrev.split('T')[0]}} <strong>Hora: </strong>{{ultimaConsultaPrev.substring(11,19)}}</p>
                <br>
            </div>
            <div>
                <button type="button" class="btn boton" (click)="c('')">Regresar</button>
                &nbsp;&nbsp;&nbsp;&nbsp; 
                <button *ngIf="categoriaMedicoSeleccionada" type="button" class="btn boton" (click)="rellenarConsulta()" (click)="verModal(nuevaConsultaModal)" (click)="c('')">Nueva Consulta</button>
                <button *ngIf="!categoriaMedicoSeleccionada && flagPrevias==0" type="button" class="btn boton" disabled>Nueva Consulta</button> 
            </div>
        </div>
    </ng-template>


    <ng-template #imcModal let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Tabla I.M.C</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body --> 
        <div class="modal-body"> 
            <span><a id="imc"><img class="imc" src="../../../../assets/img/imc.jpg"></a></span>
        </div>
    </ng-template>


    <ng-template #imcModalMenor let-c="close" led-d="dismiss"> 
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Tablas Relacionadas</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body --> 
        <div class="modal-body"> 
            <select class="form-control"  [(ngModel)]="imcMenor">
                <option selected>Por favor seleccione una tabla</option>
                <option [ngValue]="0">Percentiles circunferencia cabeza 0 - 36 meses</option> 
                <option [ngValue]="1">Percentiles estatura y peso 2 - 20 años</option>
                <option [ngValue]="2">Percentiles I.M.C. 2 - 20 años</option>
            </select>
            <br> 
            <span *ngIf="imcMenor==0"><a id="imc"><img class="imc" src="../../../../assets/img/imcMen1.jpeg"></a></span>
            <span *ngIf="imcMenor==1"><a id="imc"><img class="imc" src="../../../../assets/img/imcMen2.jpeg"></a></span>
            <span *ngIf="imcMenor==2"><a id="imc"><img class="imc" src="../../../../assets/img/imcMen3.jpeg"></a></span>
        </div>
    </ng-template>
    

    <ng-template #nuevaConsultaModal let-c="close" led-d="dismiss">
        <!-- Modal Header --> 
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Nueva consulta</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body --> 
        <div class="modal-body">
            <ul class="nav nav-tabs">
                <li><a class="active" data-toggle="tab" href="#t-not-gral">General</a></li>
                <li><a data-toggle="tab" href="#t-not-soap" >SOAP</a></li>
                <li><a data-toggle="tab" href="#t-not-notas">Notas</a></li> 
            </ul>
            <div class="tab-content" [formGroup]="consultaCrearForm">   
                <div id="t-not-gral" class="tab-pane fade show active">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div *ngIf="flagPrevias==1" class="alert alert-success" role="alert" style="text-align: center;">Primera Consulta. <br>Especialidad: {{listasCategorias[categoriaMedicoSeleccionada]}}</div>
                            <div *ngIf="flagPrevias==2" class="alert alert-success" role="alert" style="text-align: center;">Consulta Subsecuente. <br>Especialidad: {{listasCategorias[categoriaMedicoSeleccionada]}}</div>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div   class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Nota de evolución (Requerido)</label>
                                <textarea *ngIf="flagPrevias==2" class="form-control" type="text" placeholder="Nota de Evolución" formControlName="notaEvolucion"  maxlength="2000" [(ngModel)]="notaTmp.notaEvolucion" rows="5"></textarea>
                                <textarea *ngIf="flagPrevias==1" class="form-control" type="text" placeholder="Nota de Evolución" formControlName="notaEvolucion"  maxlength="2000" [(ngModel)]="notaTmp.notaEvolucion" rows="5" disabled></textarea>
                                <span *ngIf="notaTmp.notaEvolucion">Caracteres Restantes: {{2000-notaTmp.notaEvolucion.length}}</span>
                                <br *ngIf="notaTmp.notaEvolucion">
                                <div *ngIf="flagPrevias==1">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaEvolucion'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaEvolucion'].errors?.maxlength">Debe tener menos de 2000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaEvolucion'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaEvolucion'].touched && consultaCrearForm.controls['notaEvolucion'].errors?.required">Requerido.</span>
                                </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" > 
                                <br>
                                <label>Clínicos (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Clínicos " formControlName="clinicos"  maxlength="2000" [(ngModel)]="notaTmp.clinicos" rows="5"></textarea>
                                <span *ngIf="notaTmp.clinicos">Caracteres Restantes: {{2000-notaTmp.clinicos.length}}</span>
                                <br *ngIf="notaTmp.clinicos">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['clinicos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['clinicos'].errors?.maxlength">Debe tener menos de 2000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['clinicos'].errors?.pattern"> No válido.</span>
                                <br>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Impresion diagnóstica (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Impresion Diagnóstica" formControlName="impresionDiagnostica"  maxlength="4000" [(ngModel)]="notaTmp.impresionDiagnostica" rows="5"></textarea>
                                <span *ngIf="notaTmp.impresionDiagnostica">Caracteres Restantes: {{4000-notaTmp.impresionDiagnostica.length}}</span>
                                <br *ngIf="notaTmp.impresionDiagnostica">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['impresionDiagnostica'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['impresionDiagnostica'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['impresionDiagnostica'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['impresionDiagnostica'].touched && consultaCrearForm.controls['impresionDiagnostica'].errors?.required">Requerido.</span>
                                <br>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Recomendaciones de manejo (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Recomendaciones de Manejo" formControlName="manejoRecomendaciones"  maxlength="2000" [(ngModel)]="notaTmp.manejoRecomendaciones" rows="5"></textarea>
                                <span *ngIf="notaTmp.manejoRecomendaciones">Caracteres Restantes: {{2000-notaTmp.manejoRecomendaciones.length}}</span>
                                <br *ngIf="notaTmp.manejoRecomendaciones">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['manejoRecomendaciones'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['manejoRecomendaciones'].errors?.maxlength">Debe tener menos de 2000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['manejoRecomendaciones'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['manejoRecomendaciones'].touched && consultaCrearForm.controls['manejoRecomendaciones'].errors?.required">Requerido.</span>
                                <br>
                            </div>  
                            <hr>                         
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label for="sexo">Sexo (Requerido)</label>
                                <select class="form-control" id="sexo" formControlName="sexo" [(ngModel)]="notaTmp.sexo">
                                    <option>masculino</option>
                                    <option>femenino</option>
                                </select>
                            </div> 
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['sexo'].touched && consultaCrearForm.controls['sexo'].errors?.required">Requerido.</span>
                            <br>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Peso (Requerido)</label> 
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="peso" [(ngModel)]="notaTmp.peso" (change)="calcularNotaIMC()">
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Kg.</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['peso'].errors?.min">Número no válido</span>
                                    <br *ngIf="consultaCrearForm.controls['peso'].errors?.min">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['peso'].errors?.max">Número no válido</span>
                                    <br *ngIf="consultaCrearForm.controls['peso'].errors?.max">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['peso'].touched && consultaCrearForm.controls['peso'].errors?.required">Requerido.</span>
                                    <br *ngIf="consultaCrearForm.controls['peso'].touched && consultaCrearForm.controls['peso'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Talla (Requerido)</label>
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="talla" [(ngModel)]="notaTmp.talla" (change)="calcularNotaIMC()">
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">cm.</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['talla'].errors?.min">Número no válido</span>
                                    <br *ngIf="consultaCrearForm.controls['talla'].errors?.min">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['talla'].errors?.max">Número no válido</span>
                                    <br *ngIf="consultaCrearForm.controls['talla'].errors?.max">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['talla'].touched && consultaCrearForm.controls['talla'].errors?.required">Requerido.</span>
                                    <br *ngIf="consultaCrearForm.controls['talla'].touched && consultaCrearForm.controls['talla'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Índice de masa corporal</label>
                                </div>
                                <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" type="number" placeholder="" formControlName="indiceMasaCorporal" [(ngModel)]="notaTmp.indiceMasaCorporal" disabled>
                                </div>
                                <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Kg/m²</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['indiceMasaCorporal'].errors?.min">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['indiceMasaCorporal'].errors?.min">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['indiceMasaCorporal'].errors?.max">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['indiceMasaCorporal'].errors?.max">
                                    <span *ngIf="edad < 11" >No aplica.</span>
                                    <br *ngIf="edad < 11">
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Frecuencia cardiaca (Requerido)</label>
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="frecuenciaCardiaca" [(ngModel)]="notaTmp.frecuenciaCardiaca">
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">latidos por minuto</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].errors?.min">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].errors?.min">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].errors?.max">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].errors?.max">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].touched && consultaCrearForm.controls['frecuenciaCardiaca'].errors?.required">Requerido.</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaCardiaca'].touched && consultaCrearForm.controls['frecuenciaCardiaca'].errors?.required">     
                                    <br>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px" >
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                    <label>Frecuencia respiratoria (Requerido)</label>
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: left; padding-left: 0px;">
                                    <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="frecuenciaRespiratoria" [(ngModel)]="notaTmp.frecuenciaRespiratoria">
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"  style="float: right; padding-right: 0px;">
                                    <label style="padding-top: 10px;">Respiraciones por minuto</label>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.min">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.min">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.max">No válido</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.max">
                                    <span style="color:Red;" *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].touched && consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.required">Requerido.</span>
                                    <br *ngIf="consultaCrearForm.controls['frecuenciaRespiratoria'].touched && consultaCrearForm.controls['frecuenciaRespiratoria'].errors?.required">    
                                    <br>
                                </div>
                            </div>
                            </div>
                            <div class="row" style="padding-left: 30px" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Temperatura (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="temperatura" [(ngModel)]="notaTmp.temperatura">
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                <label style="padding-top: 10px;">°C</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['temperatura'].errors?.min">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['temperatura'].errors?.min">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['temperatura'].errors?.max">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['temperatura'].errors?.max">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['temperatura'].touched && consultaCrearForm.controls['temperatura'].errors?.required">Requerido.</span>
                                <br *ngIf="consultaCrearForm.controls['temperatura'].touched && consultaCrearForm.controls['temperatura'].errors?.required">    
                                <br>
                            </div>
                            </div>
                            <div class="row" style="padding-left: 30px" > 
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: center;">
                                <label>Presión arterial (Requerido)</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Sístole (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="tensionArterialSistole" [(ngModel)]="notaTmp.tensionArterialSistole">
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialSistole'].errors?.min">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialSistole'].errors?.min">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialSistole'].errors?.max">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialSistole'].errors?.max">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialSistole'].touched && consultaCrearForm.controls['tensionArterialSistole'].errors?.required">Requerido.</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialSistole'].touched && consultaCrearForm.controls['tensionArterialSistole'].errors?.required">     
                                <br>
                            </div>
                            </div>
                            <div class="row" style="padding-left: 30px" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Diástole (Requerido)</label>
                            </div>
                            <div class="col-8 col-sm-8 col-md-8 col-lg-8 col-xl-8"  style="float: left; padding-left: 0px;">
                                <input class="form-control" onkeydown="javascript: return event.keyCode == 69 ? false : true" type="number" placeholder="" formControlName="tensionArterialDiastole" [(ngModel)]="notaTmp.tensionArterialDiastole">
                            </div>
                            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"  style="float: right; padding-right: 0px;">
                                <label style="padding-top: 10px;">MM/Hg</label>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"  style="margin-left: -15px;"> 
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].errors?.min">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].errors?.min">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].errors?.max">No válido</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].errors?.max">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].touched && consultaCrearForm.controls['tensionArterialDiastole'].errors?.required">Requerido.</span>
                                <br *ngIf="consultaCrearForm.controls['tensionArterialDiastole'].touched && consultaCrearForm.controls['tensionArterialDiastole'].errors?.required">     
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="t-not-soap" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Subjetivo (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Subjetivo" formControlName="subjetivo"  maxlength="4000" [(ngModel)]="notaTmp.subjetivo" rows="5"></textarea>
                                <span *ngIf="notaTmp.subjetivo">Caracteres Restantes: {{4000-notaTmp.subjetivo.length}}</span>
                                <br *ngIf="notaTmp.subjetivo">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['subjetivo'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['subjetivo'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['subjetivo'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['subjetivo'].touched && consultaCrearForm.controls['subjetivo'].errors?.required">Requerido.</span>
                                <br>
                            </div>                           
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Objetivo (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Objetivo" formControlName="objetivo"  maxlength="4000" [(ngModel)]="notaTmp.objetivo" rows="5"></textarea>
                                <span *ngIf="notaTmp.objetivo">Caracteres Restantes: {{4000-notaTmp.objetivo.length}}</span>
                                <br *ngIf="notaTmp.objetivo">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['objetivo'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['objetivo'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['objetivo'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['objetivo'].touched && consultaCrearForm.controls['objetivo'].errors?.required">Requerido.</span>
                                <br>
                            </div>                           
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Análisis (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Análisis" formControlName="analisis"  maxlength="4000" [(ngModel)]="notaTmp.analisis" rows="5"></textarea>
                                <span *ngIf="notaTmp.analisis">Caracteres Restantes: {{4000-notaTmp.analisis.length}}</span>
                                <br *ngIf="notaTmp.analisis">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['analisis'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['analisis'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['analisis'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['analisis'].touched && consultaCrearForm.controls['analisis'].errors?.required">Requerido.</span>
                                <br>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                                <label>Plan (Requerido)</label>
                                <textarea class="form-control" type="text" placeholder="Plan" formControlName="plan"  maxlength="4000" [(ngModel)]="notaTmp.plan" rows="5"></textarea>
                                <span *ngIf="notaTmp.plan">Caracteres Restantes: {{4000-notaTmp.plan.length}}</span>
                                <br *ngIf="notaTmp.plan">
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['plan'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['plan'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['plan'].errors?.pattern"> No válido.</span>
                                <span style="color:Red;" *ngIf="consultaCrearForm.controls['plan'].touched && consultaCrearForm.controls['plan'].errors?.required">Requerido.</span>
                                <br>
                            </div>                           
                        </div>
                    </div>
                </div>
                <div id="t-not-notas" class="tab-pane fade">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <div class="alert alert-success" role="alert" style="text-align: center;">Notas personalizables.</div>
                            <label>Título</label>
                            <input class="form-control" type="text" placeholder="Título" formControlName="tituloUno"  [(ngModel)]="notaTmp.tituloUno">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloUno'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloUno'].errors?.maxlength">Debe tener menos de 200 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloUno'].errors?.pattern"> No válido.</span>
                            <br>
                            <label>Nota</label> 
                            <textarea class="form-control" type="text" placeholder="Nota" formControlName="notaUno"  maxlength="4000" [(ngModel)]="notaTmp.notaUno" rows="5"></textarea>
                            <span *ngIf="notaTmp.notaUno">Caracteres Restantes: {{4000-notaTmp.notaUno.length}}</span>
                            <br *ngIf="notaTmp.notaUno">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaUno'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaUno'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaUno'].errors?.pattern"> No válido.</span>
                            <br>
                            <hr>
                        </div>   
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Título</label>
                            <input class="form-control" type="text" placeholder="Título" formControlName="tituloDos"  [(ngModel)]="notaTmp.tituloDos">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloDos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloDos'].errors?.maxlength">Debe tener menos de 200 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloDos'].errors?.pattern"> No válido.</span>
                            <br>
                            <label>Nota</label> 
                            <textarea class="form-control" type="text" placeholder="Nota" formControlName="notaDos"  maxlength="4000" [(ngModel)]="notaTmp.notaDos" rows="5"></textarea>
                            <span *ngIf="notaTmp.notaDos">Caracteres Restantes: {{4000-notaTmp.notaDos.length}}</span>
                            <br *ngIf="notaTmp.notaDos">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaDos'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaDos'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaDos'].errors?.pattern"> No válido.</span>
                            <br>
                            <hr>
                        </div>  
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Título</label>
                            <input class="form-control" type="text" placeholder="Título" formControlName="tituloTres"  [(ngModel)]="notaTmp.tituloTres">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloTres'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloTres'].errors?.maxlength">Debe tener menos de 200 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloTres'].errors?.pattern"> No válido.</span>
                            <br>
                            <label>Nota</label> 
                            <textarea class="form-control" type="text" placeholder="Nota" formControlName="notaTres"  maxlength="4000" [(ngModel)]="notaTmp.notaTres" rows="5"></textarea>
                            <span *ngIf="notaTmp.notaTres">Caracteres Restantes: {{4000-notaTmp.notaTres.length}}</span>
                            <br *ngIf="notaTmp.notaTres">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaTres'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaTres'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaTres'].errors?.pattern"> No válido.</span>
                            <br>
                            <hr>
                        </div>  
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <label>Título</label>
                            <input class="form-control" type="text" placeholder="Título" formControlName="tituloCuatro"  [(ngModel)]="notaTmp.tituloCuatro">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloCuatro'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloCuatro'].errors?.maxlength">Debe tener menos de 200 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['tituloCuatro'].errors?.pattern"> No válido.</span>
                            <br>
                            <label>Nota</label> 
                            <textarea class="form-control" type="text" placeholder="Nota" formControlName="notaCuatro"  maxlength="4000" [(ngModel)]="notaTmp.notaCuatro" rows="5"></textarea>
                            <span *ngIf="notaTmp.notaCuatro">Caracteres Restantes: {{4000-notaTmp.notaCuatro.length}}</span>
                            <br *ngIf="notaTmp.notaCuatro">
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaCuatro'].errors?.minlength">Debe tener mas de 5 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaCuatro'].errors?.maxlength">Debe tener menos de 4000 caracteres.</span>
                            <span style="color:Red;" *ngIf="consultaCrearForm.controls['notaCuatro'].errors?.pattern"> No válido.</span>
                        </div> 
                        <br> 
                    </div>
                </div>
                <br>
                <button type="button" class="btn boton" (click)="c('')">Regresar</button>
                &nbsp;&nbsp;
                <button type="button" class="btn boton" [disabled]="consultaCrearForm.invalid" (click)="crearNota()" (click)="c('')">Actualizar</button> 
            </div>
        </div>
    </ng-template>

    <ng-template #pruebaModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Seleccionar Prueba</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
          <div class="search-banner text-white py-3" id="search-banner">
                  <div >
                      <div class="row">
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                              <div class="card acik-renk-form">
                                  <div class="card-body">
                                      <h4 class="titulo">Palabras Clave:</h4>
                                      <div class="row">
                                          <div class="col-12 col-sm-12 col-md-10 col-lg-10 col-xl-10">
                                              <div class="form-group" [formGroup]="queryForm">
                                                  <input  (keydown)="onKeydown($event)" class="form-control" type="text" style="font-size:20px" placeholder="Buscar estudio:" formControlName="query" [(ngModel)]="query">
                                                  <span style="color:Red;" *ngIf="queryForm.controls['query'].errors?.minlength">Debe ser de mas de 3 caracteres</span>
                                                  <span style="color:Red;" *ngIf="queryForm.controls['query'].errors?.maxlength">No debe ser de mas de 90 caracteres</span>
                                                  <span style="color:Red;" *ngIf="queryForm.controls['query'].touched && queryForm.controls['query'].errors?.required">Campo Requerido.</span>
                                                  <br>
                                                  <span style="color:Red;" *ngIf="queryForm.controls['query'].errors?.pattern">No válido</span>
                                              </div>
                                          </div>
                                          <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                              <button  style="font-size: 20px;" type="button" (click)="consultarEstudio()" [disabled]="queryForm.invalid" class="btn boton">Buscar</button>
                                              <br>
                                              <br>
                                          </div>
                                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                              <button  type="button" class="btn boton" style="margin-right: 15px; background-color: #7C4E26;" (click)="verModalEstudios(estudiosModal)" > Filtrar por categoría</button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div *ngIf="estudios[0]" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="color:black;">
                              <br> 
                              <h2 style="text-align: center; font-size: 2.5em;" class="titulo">Resultados:</h2>
                              <br> 
                              <div *ngFor="let results of estudios; index as i">
                                  <article class="search-result row articulo">
                                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6" style="color:black;">
                                  <br>
                                      <ul class="meta-search parrafosJustify" style="font-size: 16px;">
                                          <li><i class="fas fa fa-heartbeat"></i> <span><strong>Categoría: </strong></span>{{results.categoria}}</li> 
                                          <li><i class="fas fa fa-flask"></i> <span><strong>Área: </strong></span> {{results.area}}</li>
                                          <li><i class="fas fa fa-dollar"></i> <span><strong> Precio Normal: </strong></span>{{results.precioNormal.toFixed(2)}} MXN</li>
                                          <li><i class="fas fa fa-dollar"></i> <span><strong> Precio en Sucursal: </strong></span>{{results.precioApoyo.toFixed(2)}} MXN</li>
                                          <li style="color: green; font-weight: bold"><i class="fas fa fa-dollar"></i> <span><strong> Precio Online: </strong></span>{{results.precioVenta.toFixed(2)}} MXN</li>
                                          <li *ngIf="((((results.precioVenta*100)/results.precioNormal)-100)*-1) > 4.99" style="color: green; font-weight: bold"><i class="fas fa fa-dollar"></i> <span><strong> Mejor Precio: OnLine </strong></span> {{((((results.precioVenta*100)/results.precioNormal)-100)).toFixed(0)}}% de descuento.</li>
                                          <li *ngIf="results.sexo == 'M'"><i class="fas fa fa-male"></i> <span><strong> Sexo: </strong></span><span style="color:#394793;"><strong>Masculino</strong></span></li>
                                          <li *ngIf="results.sexo == 'F'"><i class="fas fa fa-male"></i> <span><strong> Sexo: </strong></span><span style="color:#E4007C;"><strong>Femenino</strong></span></li>
                                          <li *ngIf="results.sexo == 'I'"><i class="fas fa fa-male"></i> <span><strong> Sexo: </strong></span><span style="color:#7C4E26;"><strong>Indistinto</strong></span></li>
                                      </ul>
                                  </div>
                                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 beneficio">
                                      <br>
                                      <h3 class="prueba">{{results.prueba.substr(0,60)}}</h3>			
                                      <hr>
                                      <p class="beneficio">{{results.beneficio}}</p>						
                                      <br>
                                  </div>
                                  &nbsp;&nbsp;
                                  <button type="button" style="background-color: #9AB638;" id="btnres" (click)="verEstudiosId(results ,descripcionModal)">Ver Beneficio</button>
                                  &nbsp;&nbsp;&nbsp;&nbsp;
                                  <button data-toggle="collapse" href="#collapseOne" id="btnres" type="button" style="background-color: #394793;" (click)="c('')" (click)="verEstudiosId(results ,agendaModal)" (click)="consultarDisponibilidad()" > Seleccionar </button>
                                  </article>
                                  <br> 
                              </div>
                          </div>
                          <div *ngIf="!estudios[0]">
                              <div *ngIf="initialFlag">
                                  <br> 
                                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                      <h2 style="font-size: 2.5em;" class="titulo">No hay resultados</h2>
                                  </div>
                                  <br> 
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
        </div>
      </ng-template>


      <ng-template #estudiosModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4>Lista de categorias:</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <label style="color:#9AB638;" class="container">Seleccionar Todos
                        <input type="checkbox"  (click)="selecionarTodos()" [(ngModel)]="todosLista">
                        <span class="checkmark"></span>
                    </label>
                    <br>
                </div>
                <div class="col-md-6">
                    <label style="color:#9AB638 ;" class="container"> Analisis Sanguíneos
                        <input type="checkbox" [(ngModel)]="list[0].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Analisis Clínicos
                        <input type="checkbox" [(ngModel)]="list[1].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Ultrasonografía
                        <input type="checkbox" [(ngModel)]="list[2].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Ultrasonografía Doppler
                        <input type="checkbox" [(ngModel)]="list[3].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Rayos X
                        <input type="checkbox" [(ngModel)]="list[4].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Rayos X Contrastados
                        <input type="checkbox" [(ngModel)]="list[5].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Mastografía
                        <input type="checkbox" [(ngModel)]="list[6].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Papanicolau
                        <input type="checkbox" [(ngModel)]="list[7].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Cardiología
                        <input type="checkbox" [(ngModel)]="list[8].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Tomografía
                        <input type="checkbox" [(ngModel)]="list[9].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Tomografía Contrastada
                        <input type="checkbox" [(ngModel)]="list[10].flag" > 
                        <span class="checkmark"></span>
                    </label>
                </div>
                <div class="col-md-6">
                    <label style="color:#9AB638 ;" class="container"> Resonancia Magnética
                        <input type="checkbox" [(ngModel)]="list[11].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Resonancia Magnética Contrastada
                        <input type="checkbox" [(ngModel)]="list[12].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Colposcopía
                        <input type="checkbox" [(ngModel)]="list[13].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Densitometría
                        <input type="checkbox" [(ngModel)]="list[14].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Audiología
                        <input type="checkbox" [(ngModel)]="list[15].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Espirometría
                        <input type="checkbox" [(ngModel)]="list[16].flag" > 
                        <span class="checkmark"></span>
                    </label>
                    <label style="color:#9AB638 ;" class="container"> Patología
                        <input type="checkbox" [(ngModel)]="list[17].flag" > 
                        <span class="checkmark"></span>
                    </label>
                  </div>
            </div>
            <br>
            <button type="button" class="btn boton"  (click)="c('')">Regresar</button>
        </div>
    </ng-template>

    <ng-template #descripcionModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">{{estudio.prueba}}</h4>  
            <button type="button" class="close" style="color:white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div class="row">
                <div class="col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <a class="icono" style="color:#394793;" *ngIf="estudio.sexo == 'M'"><i class="fas fa fa-male"></i> </a>
                    <a class="icono" style="color:#E4007C;" *ngIf="estudio.sexo == 'F'"><i class="fas fa fa-female"></i> </a>
                    <a class="icono" style="color:#7C4E26;" *ngIf="estudio.sexo == 'I'"><i class="fas fa fa-group"></i> </a>
                </div>
                <div class="col-9 col-sm-5 col-md-5 col-lg-5 col-xl-5">
                    <span><strong> Precio Normal: </strong></span>{{estudio.precioNormal.toFixed(2)}} MXN
                    <span><strong> Precio en Sucursal: </strong></span>{{estudio.precioApoyo.toFixed(2)}} MXN
                    <div style="color: green; font-weight: bold"> <span><strong> Precio Online: </strong></span>{{estudio.precioVenta.toFixed(2)}} MXN</div>
                    <div *ngIf="((((estudio.precioVenta*100)/estudio.precioNormal)-100)*-1) > 4.99" style="color: green; font-weight: bold"><span><strong> Mejor Precio: OnLine </strong></span> {{((((estudio.precioVenta*100)/estudio.precioNormal)-100)).toFixed(0)}}% de descuento.</div>
                    <br>
                    <a *ngIf="estudio.sexo == 'M'"> <span><strong> Sexo: </strong></span><span >Masculino</span></a>
                    <a *ngIf="estudio.sexo == 'F'"> <span><strong> Sexo: </strong></span><span >Femenino</span></a>
                    <a *ngIf="estudio.sexo == 'I'"> <span><strong> Sexo: </strong></span><span >Indistinto</span></a>
                    <br>
                    <br> 
                </div> 
                <div class="col-12 col-sm-5 col-md-5 col-lg-5 col-xl-5">
                    <span><strong>Categoría: </strong></span>{{estudio.categoria}}
                    <br>
                    <span><strong>Area: </strong></span>{{estudio.area}}
                    <br>
                    <span><strong>Sin/Acro: </strong></span>{{estudio.sinAcro}}
                    <br>
                    <br>  
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <hr>
                    <span><strong>Descripción: </strong></span><br>{{estudio.beneficio}}
                    <br>
                    <br>
                    <span><strong>Indicaciones Pre-Examen: </strong></span><br>{{estudio.indicacionesPreExamen}}
                    <br>
                    <br>
                    <span><strong>Tiempo de Entrega: </strong></span><br>{{estudio.tiempoEntrega}}
                    <br>
                    <br>
                </div>
            </div>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button> 
        </div>
    </ng-template>

    
    <ng-template #agendaModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">Agendar cita</h4>  
            <button type="button" class="close" style="color: white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body --> 
        <div class="modal-body" >
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pasos">
                    <div class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">1</div>
                    <div class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10">
                        <h5 class="titulo">Elije un servicio</h5>
                    </div>
                </div>
                <hr>
                <div  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 collapse"  id="collapseOne">
                    <div  *ngIf="estudio.prueba == 'RAYOS X A DOMICILIO'" class="alert alert-primary" style="text-align: center;" role="alert">Este estudio varía de precio dependiendo del area anatómica a estudiar y el numero de proyecciones que requieran. Por favor espera que uno de nuestros asesores se comunique con usted para más información y afinar detalles. Nuestra zona de asistencia es: Ciudad de Puebla, San Andrés Cholula, San Pedro Cholula, Huejotzingo, Atlixco y Amozoc. Si requiere una toma fuera de estas zonas se puede realizar, con un costo proporcinal a la distancia. </div>
                    <div style="display: flex; align-content: center;" >
                        <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                            <p style="color:#9AB638"><strong>Datos de Estudio:</strong></p>
                            <span><strong>Prueba: </strong></span>{{estudio.prueba}}
                            <span><strong>Tiempo de Entrega: </strong></span>{{estudio.tiempoEntrega}}<br>
                        </div>
                        <div  class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                            <br>
                            <li><i class="fas fa fa-dollar"></i> <span><strong> Precio Normal: </strong></span>{{estudio.precioNormal.toFixed(2)}} MXN</li>
                            <span><strong> Precio en Sucursal: </strong></span>{{estudio.precioApoyo.toFixed(2)}} MXN<br>
                            <div style="color: green; font-weight: bold"> <span><strong> Precio Online: </strong></span>{{estudio.precioVenta.toFixed(2)}} MXN</div>
                            <div *ngIf="((((estudio.precioVenta*100)/estudio.precioNormal)-100)*-1) > 4.99" style="color: green; font-weight: bold"><span><strong> Mejor Precio: OnLine </strong></span> {{((((estudio.precioVenta*100)/estudio.precioNormal)-100)).toFixed(0)}}% de descuento.</div>
                            <a *ngIf="estudio.sexo == 'M'"> <span><strong> Sexo: </strong></span><span >Masculino</span></a>
                            <a *ngIf="estudio.sexo == 'F'"> <span><strong> Sexo: </strong></span><span >Femenino</span></a>
                            <a *ngIf="estudio.sexo == 'I'"> <span><strong> Sexo: </strong></span><span >Indistinto</span></a><br>
                            <div *ngIf="estudio.sinAcro"><span ><strong>Sin/Acro: </strong></span>{{estudio.sinAcro}}<br></div>
                            <div *ngIf="!estudio.sinAcro"><span ><strong>Sin/Acro: </strong></span>Ninguna<br></div>
                        </div>
                    </div>
                        <div  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                            <span><strong>Descripción: </strong></span>{{estudio.beneficio}}
                            <br><br>
                            <span><strong>Indicaciones Pre-Examen: </strong></span>{{estudio.indicacionesPreExamen}} 
                            <br><br>
                            <span><strong>Otras Indicaciónes: </strong></span>
                            <div *ngIf="estudio.otrasIndicaciones">{{estudio.otrasIndicaciones}}</div>
                            <div *ngIf="!estudio.otrasIndicaciones">Ninguna</div>                  
                        </div>
                        <div  style="text-align: center;" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                            <br>
                        </div>
                        <br>
                        <div *ngIf="tiempo==0" class="alert alert-primary" style="text-align: center;" role="alert">Una vez confirmada esta cita, uno de nuestros asesores se comunicará con usted en menos de una hora.</div>
                        <div *ngIf="estudio.domingos" class="alert alert-primary" style="text-align: center;" role="alert">Este estudio es posible agendarlo los días Domingos en la sucursal “Clínica Integral”, caso en el cual el tiempo de entrega se le incrementará un día extra. </div>
                        <br>
            <button *ngIf="!flagAgenda" data-toggle="collapse" data-target="#collapseOne,#collapseFive" type="button" class="btn boton">Siguiente</button>
            <button *ngIf="flagAgenda" data-toggle="collapse" data-target="#collapseOne,#collapseTwo" type="button" class="btn boton">Siguiente</button>
            <br>
            <br>
            </div>
                <div *ngIf="flagAgenda"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pasos">
                    <div class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">2</div>
                    <div class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10">
                        <h5 class="titulo">Selecciona tipo de Cita</h5>
                    </div>
                </div>
                <hr *ngIf="flagAgenda" >
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 collapse"  id="collapseTwo">
                    <select  [(ngModel)]="flagCita" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off">
                                <option [ngValue]=true >Cita Agendada</option>
                                <option [ngValue]=false >Cita Abierta</option>
                    </select> 
                    <br>
                    <br>
                    <div *ngIf="flagCita">
                        <h6 class="titulo" style="font-size: 25px; text-align: center;"> Eliges la sucursal, fecha y hora de tu cita antes de pagar.</h6>
                        <br>
                        <br>
                    </div>
                    <div *ngIf="!flagCita">
                        <h1 class="titulo" style="font-size: 20px; text-align: justify;">Tú eliges el servicio y tienes hasta seis meses para asistir a nuestras sucursales y llevarlo a cabo. <br><br> Importante. Para poder ejecutar tu cita abierta debes confirmar el servicio, hasta con una hora de anticipación, esto para que consultemos disponibilidad.</h1>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                    </div>
                    <button data-toggle="collapse" data-target="#collapseOne,#collapseTwo" type="button" class="btn boton">Anterior</button>
                    &nbsp;&nbsp;&nbsp;&nbsp; 
                    <button *ngIf="flagCita==null" data-toggle="collapse" data-target="#collapseTwo,#collapseThree" (click)="seleccionarHoraFecha()" type="button" class="btn boton">Siguienteddd</button>
                    <button *ngIf="flagCita" data-toggle="collapse" data-target="#collapseTwo,#collapseThree" (click)="seleccionarHoraFecha()" type="button" class="btn boton">Siguiente</button>
                    <button *ngIf="!flagCita" data-toggle="collapse" data-target="#collapseTwo,#collapseFive" (click)="seleccionarHoraFecha()" type="button" class="btn boton">Siguiente</button>
                    <br>
                    <br>
                </div>            
                <div *ngIf="flagAgenda && flagCita"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pasos">
                    <div class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">3</div>
                    <div class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10">
                        <h5 class="titulo">Elije una sucursal</h5>
                    </div>
                </div>
                <hr *ngIf="flagAgenda && flagCita" >
                <div *ngIf="flagAgenda && flagCita"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 collapse"  id="collapseThree">
                    <div *ngIf="disponibilidad.count>0" >
                        <select  [(ngModel)]="sucursalSelecionada" class="custom-select mr-sm-2" id="inlineFormCustomSelect" autocomplete="off">
                                <option value="" selected></option>
                                <option *ngFor="let items of disponibilidad.results; index as i" [ngValue]="items" >{{items.Sucursal.nombreSucursal}}</option>
                        </select>
                        <div *ngIf="sucursalSelecionada">
                            <br>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <h5 style="color:#9AB638">Sucursal: {{sucursalSelecionada.Sucursal.nombreSucursal}}</h5>
                                <br>
                            </div>
                            <div style="display: flex;">
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                    <p style="color:#9AB638"><strong>Direccion:</strong></p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.calle"><strong>Calle: </strong>{{sucursalSelecionada.Sucursal.calle}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.colonia"><strong>Col: </strong>{{sucursalSelecionada.Sucursal.colonia}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.cp"><strong>cp: </strong>{{sucursalSelecionada.Sucursal.cp}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.num_exterior"><strong>Num. Exterior: </strong>{{sucursalSelecionada.Sucursal.num_exterior}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.num_interior"><strong>Num. Interior: </strong>{{sucursalSelecionada.Sucursal.num_interior}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.estado"><strong>Edo: </strong>{{sucursalSelecionada.Sucursal.estado}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.municipio"><strong>Municipio: </strong>{{sucursalSelecionada.Sucursal.municipio}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.descipcion"><strong>Detalles: </strong>{{sucursalSelecionada.Sucursal.descipcion}}</p>
                                </div>
                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                    <p style="color:#9AB638"><strong>Horario:</strong></p>
                                    <p><strong>Horario Lun - Vie: </strong>{{sucursalSelecionada.Sucursal.hora_apertura}} - {{sucursalSelecionada.Sucursal.hora_cierre}}</p>
                                    <p><strong>Horario Sab: </strong>{{sucursalSelecionada.Sucursal.hora_apertura_sab}} - {{sucursalSelecionada.Sucursal.hora_cierre_sab}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.hora_apertura_dom" ><strong>Horario Dom (recepción de estudios) : </strong>{{sucursalSelecionada.Sucursal.hora_apertura_dom}} - {{sucursalSelecionada.Sucursal.hora_cierre_dom}}</p>
                                    <p *ngIf="sucursalSelecionada.Sucursal.estacionamiento"><strong>Estacionamiento: </strong>Si</p>
                                    <p *ngIf="!sucursalSelecionada.Sucursal.estacionamiento"><strong>Estacionamiento: </strong>No</p>
                                    <p *ngIf="!sucursalSelecionada.Sucursal.telefono"><strong>Telefono: </strong>+52 {{sucursalSelecionada.Sucursal.telefono}}</p>
                                </div>
                            </div>
                        </div>    
                    </div>
                    <div *ngIf="disponibilidad.count==0">
                        <br> 
                        <h5 style="text-align: center;" class="text-white titulo">De momento no hay sucursales disponibles. Intentelo más tarde.</h5>
                        <br> 
                    </div>
                    <br>
                    <br>
                    <button data-toggle="collapse" data-target="#collapseTwo,#collapseThree" type="button" class="btn boton">Anterior</button>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <button *ngIf="!sucursalSelecionada" data-toggle="collapse" data-target="#collapseThree,#collapseFour" type="button" class="btn boton" disabled>Siguiente</button>
                    <button *ngIf="sucursalSelecionada" (click)="seleccionarSala()" data-toggle="collapse" data-target="#collapseThree,#collapseFour" type="button" class="btn boton" >Siguiente</button>
                    <br>
                    <br>
                </div>
                <div *ngIf="flagAgenda && flagCita"  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pasos">
                    <div class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">4</div>
                    <div class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10">
                        <h5 class="titulo">Selecciona fecha y hora </h5>
                    </div>
                </div>
                <hr *ngIf="flagAgenda && flagCita" >
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 collapse"  id="collapseFour">
                    <div class="col-md-12 text-center">
                        <h5 class="titulo"> 1.- Selecciona el día</h5>
                        <br>
                        <form [formGroup]="citaFechaForm">
                            <input class="form-control" id="date" type="date" formControlName="fecha_cita" [(ngModel)]="fechaSelecionada" (click)="purgarHorario()" >
                            <span style="color:Red;" *ngIf="citaFechaForm.controls['fecha_cita'].errors?.minDate">Esta fecha no es válida</span>
                            <span style="color:Red;" *ngIf="citaFechaForm.controls['fecha_cita'].errors?.maxDate">Esta fecha no puede superar un año a partir del día de hoy</span>
                            <span style="color:Red;" *ngIf="citaFechaForm.controls['fecha_cita'].touched && citaFechaForm.controls['fecha_cita'].errors?.required">Campo Requerido.</span>
                            <span style="color:Red;" *ngIf="citaFechaForm.errors" > De momento solo contamos con servicio de Lun - Sab</span>
                        </form>
                        <br>
                        <button style="background-color: #394793;"  (click)="consultarCitas()" (click)="verHorarioLista(listaModal)" [disabled]="citaFechaForm.invalid" type="button" class="btn boton ">Seleccionar Hora</button>
                    </div>
                    <br>
                    <div *ngIf="horaFlag">
                    <h6 class="titulo" style="font-size: 25px; text-align: center;">Fecha: {{fechaSelecionada}}</h6>
                    <h6 class="titulo" style="font-size: 25px; text-align: center;">{{hora_inicio}} - {{hora_final}} </h6>
                    </div>
                    <br>
                    <button data-toggle="collapse" data-target="#collapseThree,#collapseFour" type="button" class="btn boton">Anterior</button>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <button *ngIf="!flagCita" data-toggle="collapse" data-target="#collapseFour,#collapseFive" type="button" class="btn boton">Siguiente</button>
                    <button *ngIf="!flagFinal && !horaFlag" data-toggle="collapse" data-target="#collapseFour,#collapseFive" type="button" class="btn boton" disabled>Siguiente</button>
                    <button *ngIf="!flagFinal && horaFlag" data-toggle="collapse" data-target="#collapseFour,#collapseFive" type="button" class="btn boton" >Siguiente</button>
                    <br>
                    <br>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pasos">
                    <div *ngIf="flagAgenda && flagCita" class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">5</div>
                    <div *ngIf="!flagAgenda"  class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">2</div>
                    <div *ngIf="!flagCita"  class="numberCircle col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">3</div>
                    <div class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10">
                        <h5 class="titulo">Finalizar agenda</h5>
                    </div>
                </div>
                <hr *ngIf="flagAgenda || flagCita">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 collapse"  id="collapseFive">
                    <div style="display: flex; align-content: center;" >
                        <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6" >
                            <br>
                                <h5 style="color:#9AB638">Prueba: {{estudio.prueba}}</h5>
                                <br>
                                <p><strong>Tiempo de entrega: </strong>{{estudio.tiempoEntrega}}</p>
                                <p *ngIf="estudio.sexo == 'M'"><strong>Sexo: </strong>Masculino</p>
                                <p *ngIf="estudio.sexo == 'F'"><strong>Sexo: </strong>Femenino</p>
                                <p *ngIf="estudio.sexo == 'I'"><strong>Sexo: </strong>Indistinto</p>
                                <p><strong>Indicaciones Pre-Examen: </strong>{{estudio.indicacionesPreExamen}}</p>
                                <span><strong>Otras Indicaciónes: </strong></span>
                                <br>
                                <p *ngIf="estudio.otrasIndicaciones">{{estudio.otrasIndicaciones}}</p>
                                <p *ngIf="!estudio.otrasIndicaciones">Ninguna</p>
                                <p><strong>Precio: </strong>{{estudio.precioVenta.toFixed(2)}} MXN</p> 
                                <br> 
                        </div>
                        <div *ngIf="sucursalSelecionada" class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                            <br>
                                <h5 style="color:#9AB638; ">Sucursal: {{sucursalSelecionada.Sucursal.nombreSucursal}}</h5>
                                <br>
                                <p *ngIf="sucursalSelecionada.Sucursal.calle && (flagAgenda && flagCita )"><strong>Calle: </strong>{{sucursalSelecionada.Sucursal.calle}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.colonia && (flagAgenda && flagCita )"><strong>Col: </strong>{{sucursalSelecionada.Sucursal.colonia}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.cp && (flagAgenda && flagCita )"><strong>cp: </strong>{{sucursalSelecionada.Sucursal.cp}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.num_exterior && (flagAgenda && flagCita )"><strong>Num. Exterior: </strong>{{sucursalSelecionada.Sucursal.num_exterior}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.num_interior && (flagAgenda && flagCita )"><strong>Num. Interior: </strong>{{sucursalSelecionada.Sucursal.num_interior}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.estado && (flagAgenda && flagCita )"><strong>Edo: </strong>{{sucursalSelecionada.Sucursal.estado}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.municipio && (flagAgenda && flagCita )"><strong>Municipio: </strong>{{sucursalSelecionada.Sucursal.municipio}}</p>
                                <p *ngIf="sucursalSelecionada.Sucursal.descipcion && (flagAgenda && flagCita )"><strong>Detalles: </strong>{{sucursalSelecionada.Sucursal.descipcion}}</p>
                            <br>
                        </div>
                    </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                            <div *ngIf="horaFlag && (flagAgenda && flagCita )">
                                <br>
                                <h6 class="titulo" style="font-size: 25px; text-align: center;">Fecha: {{fechaSelecionada}}</h6>
                                <h6 class="titulo" style="font-size: 25px; text-align: center;">{{hora_inicio}} - {{hora_final}} </h6>
                            </div>
                            <br>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="text-align: center;">
                            <button  (click)="carrito()" (click)="c('')" type="button" class="btn boton" style="background-color: #394793;" > Agregar al carrito </button>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <button  (click)="compra()" (click)="c('')" type="button" class="btn boton" style="background-color: #394793;" > Pago en sucursal </button>
                        </div>
                        <br>
                        <br>
                    <button *ngIf="!flagCita"  data-toggle="collapse" data-target="#collapseTwo,#collapseFive" type="button" class="btn boton">Anterior</button>
                    <button *ngIf="flagAgenda && flagCita"  data-toggle="collapse" data-target="#collapseFour,#collapseFive" type="button" class="btn boton">Anterior</button>
                    <button *ngIf="!flagAgenda"  data-toggle="collapse" data-target="#collapseOne,#collapseFive" type="button" class="btn boton">Anterior</button>
                    <br>
                </div>
            </div>
            <br>
            <button type="button" class="btn btn-danger" (click)="c('')">Cancelar</button>
        </div>
    </ng-template>


    <ng-template #listaModal let-c="close" led-d="dismiss">
        <!-- Modal Header -->
        <div class="modal-header" style="color:white; background-color:#9AB638;">  
            <h4 style="text-align: center;">2.- Selecciona el horario</h4>  
            <button type="button" class="close" style="color: white;" (click)="c('')">x</button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body">
            <div *ngIf="listaHoras">
                <div *ngFor="let results of listaHoras; index as i">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <div class="card card-inverse card-primary ">
                            <blockquote class=" block" (click)="c('')" (click)="seleccionarHora(results.hora_inicio, results.hora_final)">
                                <h4 class="titulo" style="text-align: center;">Hora: {{results.hora_inicio}} - {{results.hora_final}} </h4>
                                <p style="text-align: center;"><strong>Disponible</strong></p>
                            </blockquote>
                        </div>
                    </div>
                </div> 
            </div>
            <br>
            <button type="button" class="btn boton" (click)="c('')">Regresar</button>
        </div>
    </ng-template>